(this["webpackJsonplegume-choice-client"]=this["webpackJsonplegume-choice-client"]||[]).push([[0],{191:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(80),l=a.n(o),i=(a(94),a(9)),s=a(10),c=a(12),u=a(11),m=a(42),d=a(14),b=a(86),f=a(36),p=(a(95),a(83)),h=a(84),j=a(85),x=a(82),g=(a(96),a(33)),v=a.n(g),y=a(81),O=a.n(y),k=a.p+"static/media/home-component-markdown.0579c1b4.md",w=a(1),F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={file:k,markdown:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get(this.state.file).then((function(t){e.setState({markdown:t.data})}))}},{key:"render",value:function(){return Object(w.jsx)("div",{children:Object(w.jsx)(O.a,{children:this.state.markdown})})}}]),a}(n.Component),S=a(23),C=a(13),L=a(34),E=a(5),D=a(30),T=a(89),H=(a(191),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addUserlocal=function(e){e.preventDefault();var t=n.state.usersLocal,a=n.state.formEntry;""!==a.username?t.some((function(e){return e.username===a.username}))?alert("Username already exists"):t.some((function(e){return e.email===a.email}))?alert("email already registered"):n.setState({usersLocal:[].concat(Object(L.a)(t),[a]),formEntry:{username:"",email:""}}):alert("No username entered")},n.handleChange=function(e){e.preventDefault();var t=[e.target.name],a=e.target.value;n.setState((function(e){return{formEntry:Object(C.a)(Object(C.a)({},e.formEntry),{},Object(S.a)({},t,a))}}))},n.deleteUser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.preventDefault();var a=n.state.usersLocal,r=a.filter((function(e){return e.email!==t.email||e.username!==t.username}));n.setState((function(e){return{usersLocal:r}}))},n.subsetArrays=function(e,t){return e.map((function(e){return e[t]}))},n.saveChanges=function(e){var t,a,r=n.state.usersLocal,o=n.state.usersOnline;t=r.filter((function(e){return!n.subsetArrays(o,"email").includes(e.email)&&!n.subsetArrays(o,"username").includes(e.username)})),a=o.filter((function(e){return!n.subsetArrays(r,"email").includes(e.email)&&!n.subsetArrays(r,"username").includes(e.username)})),t.length>0&&v()({method:"post",url:"https://l-gorman.com/api/users/insertmany/",data:{newUsers:t},headers:{accept:"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),a.length>0&&v()({method:"post",url:"https://l-gorman.com/api/users/deletemany/",data:{deleteUsers:a},headers:{accept:"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),n.setState((function(){return{usersOnline:r}}))},n.userForm=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"form-container",children:[Object(w.jsx)("h2",{children:"New Users"}),Object(w.jsxs)(D.a,{onSubmit:n.addUserlocal,children:[Object(w.jsxs)(D.a.Group,{controlId:"basicusername",children:[Object(w.jsx)(D.a.Label,{children:"Username"}),Object(w.jsx)(D.a.Control,{name:"username",type:"text",onChange:n.handleChange})]}),Object(w.jsxs)(D.a.Group,{controlId:"basicemail",children:[Object(w.jsx)(D.a.Label,{children:"Email"}),Object(w.jsx)(D.a.Control,{name:"email",type:"email",onChange:n.handleChange})]}),Object(w.jsx)(T.a,{className:"delete-button",variant:"primary",type:"submit",children:"Add User"})]})]}),Object(w.jsxs)("div",{className:"form-container",children:[Object(w.jsx)("h2",{children:"Users"}),n.state.usersLocal.map((function(e,t){return Object(w.jsxs)("div",{className:"user-container",children:[t+1,". ",e.username," (",e.email,")",Object(w.jsx)("div",{className:"deleteButton",children:Object(w.jsx)(T.a,{onClick:function(t){return n.deleteUser(t,{id:e._id,username:e.username,email:e.email})},children:"Delete User"})})]},"user "+e.email+" "+e.username)})),Object(w.jsx)("div",{className:"user-container",children:Object(w.jsx)(T.a,{onClick:n.saveChanges,className:"deleteButton",children:"Submit"})})]})]})},n.state={usersLocal:[],usersOnline:[],formEntry:{username:"",email:""}},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.addUserlocal=n.addUserlocal.bind(Object(E.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v()({method:"get",url:"https://l-gorman.com/api/users",headers:{accept:"application/json"}}).then((function(t){e.setState({usersLocal:t.data,usersOnline:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(){console.log(this.state)}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Admin component"}),Object(w.jsx)(this.userForm,{})]})}}]),a}(n.Component)),N=Object(n.createContext)(),A=(a(193),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){n.setState(Object(S.a)({},t.variable,e.target.value)),n.context.user=n.state},n.authenticateUser=function(e){e.preventDefault(),n.setState({authenticated:!0})},n.state={username:"",projectID:"",password:"",authenticated:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(void 0!==this.context.user){var e=this.context.user;this.setState(e)}}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.user=e,console.log(this.context)}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"form-container",children:[Object(w.jsx)("h1",{children:"Project Information"}),Object(w.jsxs)(D.a,{children:[Object(w.jsx)(D.a.Label,{children:"Username"}),Object(w.jsx)(D.a.Control,{type:"text",value:this.state.username,onChange:function(t){return e.handleChange(t,{variable:"username"})}}),Object(w.jsx)(D.a.Label,{children:"Project ID"}),Object(w.jsx)(D.a.Control,{type:"text",value:this.state.projectID,onChange:function(t){return e.handleChange(t,{variable:"projectID"})}}),Object(w.jsx)(D.a.Label,{children:"Password"}),Object(w.jsx)(D.a.Control,{type:"password",value:this.state.password,onChange:function(t){return e.handleChange(t,{variable:"password"})}}),Object(w.jsx)(T.a,{className:"submitButton",type:"submit",onClick:this.authenticateUser,children:"Authenticate"})]})]})}}]),a}(r.a.Component));A.contextType=N;var I=A,R=(a(194),a(25)),M=a(19),G=a(7),V=a.n(G),U=[{name:"Food",label:"food"},{name:"Feed",label:"feed"},{name:"Income",label:"income"},{name:"Erosion Control",label:"erosion-control"},{name:"Fuel",label:"fuel"},{name:"Soil Fertility",label:"soil-fertility"}],P=[{name:"Low",label:"low"},{name:"Medium",label:"med"},{name:"High",label:"high"}],B=[{name:"Farmer",label:"farmer"},{name:"Expert",label:"expert"}],W=[{name:"Land",label:"land"},{name:"Labour",label:"labour"},{name:"Seed",label:"seed"},{name:"Inputs and services",label:"inp-serv"},{name:"Knowledge and skills",label:"knowl-skill"},{name:"Water",label:"water"},{name:"Markets",label:"markets"}],z=[{name:"Rainfall (mm/year)",label:"rainfall",minValue:280,maxValue:4290,value:2285},{name:"Temperature (mean \xb0C/month)",label:"temp",minValue:0,maxValue:45,value:22.5},{name:"Altitude (average masl)",label:"alt",minValue:0,maxValue:3800,value:1900},{name:"Soil pH (average)",label:"soilpH",minValue:4,maxValue:9,value:6.5}],K={biofilters:V.a.cloneDeep(z)},J=(a(196),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).tableHeader=function(){return Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Biofilters"}),Object(w.jsx)("th",{children:"Site Values"})]})})},n.renderDefaultValue=function(e){return e.value},n.tableBody=function(){return Object(w.jsx)("tbody",{children:n.state.biofilters.map((function(e,t){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name}),Object(w.jsx)("td",{children:Object(w.jsx)(M.a,{type:"number",value:n.renderDefaultValue({value:e.value}),onChange:function(t){n.handleChange(t,{biofilter:e})}})})]},"agro-eco-table"+e.label)}))})},n.handleChange=function(e,t){var a=n.state.biofilters;a.forEach((function(n,r){n.label===t.biofilter.label&&(a[r].value=parseFloat(e.target.value))})),n.setState({biofilters:a})},n.state=V.a.cloneDeep(K),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(void 0!==this.context.agroEcoData){var e=this.context.agroEcoData;this.setState(e)}else{var t=this.state;this.context.agroEcoData=t}}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.agroEcoData=e,console.log(this.context.agroEcoData)}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Agroecological Filter"}),Object(w.jsx)("div",{className:"table-container",children:Object(w.jsx)(D.a,{children:Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[this.tableHeader(),this.tableBody()]})})})]})}}]),a}(r.a.Component));J.contextType=N;for(var _=J,$={attributes:W,participants:B,typologies:P,scores:[]},q=0;q<W.length;q++){$.scores.push({scoreType:"average",attribute:W[q],score:0});for(var Q=0;Q<B.length;Q++)for(var X=0;X<P.length;X++)$.scores.push({scoreType:"individual",attribute:W[q],participant:B[Q],typology:P[X],score:0})}a(197);var Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){t.score=parseInt(e.target.value);var a=n.state.scores;n.changeIndividualScores(a,t),n.changeAverages(a,t),n.setState({scores:a})},n.changeIndividualScores=function(e,t){e.forEach((function(a,n){a.participant===t.participant&&a.attribute===t.attribute&&a.typology===t.typology&&(e[n].score=t.score)}))},n.changeAverages=function(e){e.forEach((function(t,a){if("average"===t.scoreType){var r=n.averageAttribute(e,t.attribute);e[a].score=r}}))},n.averageAttribute=function(e,t){var a=[];return e.forEach((function(n,r){n.attribute===t&&"individual"===n.scoreType&&a.push(e[r].score)})),a.reduce((function(e,t){return e+t}),0)/a.length},n.renderRowAverage=function(e){return Object(w.jsx)("td",{children:n.averageAttribute(n.state.scores,e.attribute).toFixed(2)})},n.renderDefaultValue=function(e){return n.state.scores.filter((function(t,a){if("individual"===t.scoreType&&t.attribute===e.attribute&&t.participant===e.participant&&t.typology===e.typology)return!0}))[0].score},n.contextRow=function(e){var t=e.attribute;return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:t.name}),n.state.typologies.map((function(a){return n.state.participants.map((function(r){return Object(w.jsx)("td",{children:Object(w.jsx)(M.a,{as:"select",value:n.renderDefaultValue({typology:a,participant:r,attribute:t}),onChange:function(o){return n.handleChange(o,e={typology:a,participant:r,attribute:t})},children:[0,1,2,3,4].map((function(e){return Object(w.jsx)("option",{children:e},"form-option-"+a.name+"-"+r.name+"-"+t.name+"-"+e)}))},"form-control-"+a.name+"-"+r.name+"-"+t.name)},"table-entry-"+a.name+"-"+r.name+"-"+t.name)}))})),n.renderRowAverage({attribute:t})]})},n.allRows=function(){return null!==n.state?n.state.attributes.map((function(e){return n.contextRow({attribute:e,key:"context-row-"+e.name})})):Object(w.jsx)("h1",{children:"Null State"})},n.tableHeader=function(){return null!==n.state?Object(w.jsxs)("thead",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{rowSpan:"2"}),n.state.typologies.map((function(e){return Object(w.jsxs)("th",{colSpan:"2",children:["Typology - ",e.name]},"typology-header"+e.name)})),Object(w.jsx)("th",{rowSpan:"2",children:"Mean Score (0-4)"},"average-header")]}),Object(w.jsx)("tr",{children:n.state.typologies.map((function(e){return n.state.participants.map((function(e){return Object(w.jsx)("th",{children:e.name},"participant-header"+e.name)}))}))},"participant-header-row")]}):Object(w.jsx)("h1",{children:"Null State"})},n.state=V.a.cloneDeep($),n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.changeIndividualScores=n.changeIndividualScores.bind(Object(E.a)(n)),n.changeAverages=n.changeAverages.bind(Object(E.a)(n)),n.averageAttribute=n.averageAttribute.bind(Object(E.a)(n)),n.renderRowAverage=n.renderRowAverage.bind(Object(E.a)(n)),n.renderDefaultValue=n.renderDefaultValue.bind(Object(E.a)(n)),n.contextRow=n.contextRow.bind(Object(E.a)(n)),n.allRows=n.allRows.bind(Object(E.a)(n)),n.tableHeader=n.tableHeader.bind(Object(E.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(void 0!==this.context.contextScores){var e=this.context.contextScores;this.setState(e)}else{var t=this.state;this.context.contextScores=t}}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.contextScores=e,console.log(this.state)}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Context Scoring"}),Object(w.jsx)(D.a,{children:Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[this.tableHeader(),Object(w.jsx)("tbody",{children:this.allRows()})]})})]})}}]),a}(r.a.Component);Y.contextType=N;var Z=Y,ee=(a(198),JSON.parse(JSON.stringify(U)));ee.forEach((function(e,t){[0,1].includes(t)&&(e.score=4),[2,3,4,5].includes(t)&&(e.score=3)}));var te={farmerAttributes:[{name:"Number",label:"number"},{name:"Name",label:"name"},{name:"Gender",label:"gender"},{name:"Typology",label:"typology"},{name:"Matrix Selections",label:"selections"},{name:"Total",label:"total"}],farmers:[],legumeFunctions:U,blankFarmer:{number:0,name:"Jane Bloggs",gender:"Female",typology:"Medium",selections:ee,total:0},typology:P,gender:[{name:"Male",label:"male"},{name:"Female",label:"female"}],summary:{scoreTypes:[],scoresIndividual:[]}};U.forEach((function(e){te.summary.scoresIndividual.push({legumeFunction:e,scores:[{name:"Total",label:"total",score:0},{name:"Score (0-5)",label:"score",score:0},{name:"Average Rank",label:"rank",score:0}]})})),U.forEach((function(e,t){te.gender.map((function(e){te.summary.scoresIndividual[t].scores.push({name:e.name+" (0-5)",label:e.label,type:"gender",score:0})})),te.typology.map((function(e){te.summary.scoresIndividual[t].scores.push({name:e.name+" (0-5)",label:e.name,type:"typology",score:0})}))})),te.summary.scoreTypes=te.summary.scoresIndividual[0].scores;var ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addFarmer=function(){var e=V.a.cloneDeep(n.state.farmers),t=e.length+1,a=V.a.cloneDeep(n.state.blankFarmer);a.number=t,e.push(a),n.setState({farmers:e},(function(){n.updateTotal(),n.updateFarmerSummary()}))},n.farmEntryFields=function(e){return"selections"===e.attribute.label?n.scoringInput(e):"name"===e.attribute.label?n.farmerNameInput(e):n.farmerDetailsSelectInput(e)},n.farmerNameInput=function(e){return Object(w.jsx)("td",{children:Object(w.jsx)(M.a,{value:e.farmer.name,type:"text",onChange:function(t){return n.updateFarmerName(t,e)}})})},n.scoringInput=function(e){return Object(w.jsx)("td",{children:Object(w.jsx)(M.a,{defaultValue:e.legumeFunctions.score,type:"number",onChange:function(t){return n.updateFarmerScore(t,e)}})})},n.farmerDetailsSelectInput=function(e){return Object(w.jsx)("td",{children:Object(w.jsx)(M.a,{as:"select",defaultValue:e.farmer[e.attribute.label],onChange:function(t){return n.updateFarmerDetailesSelect(t,e)},children:n.state[e.attribute.label].map((function(t){return Object(w.jsx)("option",{children:t.name},"form-option-"+e.attribute.label+"-"+e.farmer.number+"-"+t.label)}))})})},n.updateFarmerScore=function(e,t){var a=Object(L.a)(n.state.farmers),r="";a.forEach((function(e,a){e.number===t.farmer.number&&(r=a)}));var o=n.state.legumeFunctions,l="";o.forEach((function(e,a){e.label===t.legumeFunctions.label&&(l=a)}));var i=Object(C.a)({},a[r].selections[l]);i.score=parseInt(e.target.value),a[r].selections[l]=i,n.setState({farmers:a}),n.updateTotal(),n.updateFarmerSummary()},n.updateTotal=function(){var e=n.state.farmers;e.map((function(e){e.total=0,e.selections.map((function(t){e.total+=t.score}))})),n.setState({farmers:e})},n.updateFarmerName=function(e,t){var a=Object(L.a)(n.state.farmers);a.forEach((function(n,r){n.number===t.farmer.number&&(a[r].name=e.target.value)})),n.setState({farmers:a})},n.updateFarmerDetailesSelect=function(e,t){var a=Object(L.a)(n.state.farmers);a.forEach((function(n,r){n.number===t.farmer.number&&(a[r][t.attribute.label]=e.target.value)})),n.setState({farmers:a}),n.updateFarmerSummary()},n.tableHeader=function(){return null!==n.state?Object(w.jsxs)("thead",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{rowSpan:"2",children:"Farmer Number"}),Object(w.jsx)("th",{rowSpan:"2",children:"Farmer Name"}),Object(w.jsx)("th",{rowSpan:"2",children:"Gender"}),Object(w.jsx)("th",{rowSpan:"2",children:"Typology"}),Object(w.jsx)("th",{rowSpan:"1",colSpan:"6",children:"Functions"}),Object(w.jsx)("th",{rowSpan:"2",children:"Total"})]}),Object(w.jsx)("tr",{children:n.state.legumeFunctions.map((function(e){return Object(w.jsx)("th",{children:e.name},"participatory-matrix-head-"+e.label)}))})]}):Object(w.jsx)("h1",{children:"Null State"})},n.tableRows=function(){return null!==n.state?n.state.farmers.map((function(e){return Object(w.jsx)("tr",{children:n.state.farmerAttributes.map((function(t){return"selections"===t.label?e.selections.map((function(a){return n.farmEntryFields(Object(S.a)({key:"participatory-matrix-body-"+e.number+a.label,attribute:t,farmer:e,legumeFunctions:a},"farmer",e))})):"number"===t.label?Object(w.jsx)("td",{children:e.number},"select-input"+e.number+"-"+t.label):"total"===t.label?Object(w.jsx)("td",{children:e.total},"select-input"+e.number+"-"+t.label):n.farmEntryFields({key:"farmEntry-field-"+t.label+"-"+e.number,attribute:t,farmer:e})}))},"participatory-matrix-body-"+e.number)})):Object(w.jsx)("h1",{children:"Null State"})},n.calculateAttributeRank=function(){var e=V.a.cloneDeep(n.state.summary.scoresIndividual);e.forEach((function(e){e.scores[2].score=1})),e.forEach((function(t){e.forEach((function(e){t.scores[1].score>e.scores[1].score&&(t.scores[2].score=t.scores[2].score),t.scores[1].score<e.scores[1].score&&(t.scores[2].score+=1)}))}));for(var t=n.state.legumeFunctions.length,a=[],r=0;r<t;r++)a[r]={number:r+1,occurences:0,conversion:r+1};e.forEach((function(e){a.forEach((function(t){e.scores[2].score==t.number&&(t.occurences+=1,t.conversion=(t.occurences+2*t.number-1)/2)}))})),e.forEach((function(e){a.forEach((function(t){e.scores[2].score==t.number&&(e.scores[2].score=t.conversion)}))})),n.setState((function(t){return Object(C.a)(Object(C.a)({},t),{},{summary:Object(C.a)(Object(C.a)({},t.summary),{},{scoresIndividual:e})})}))},n.updateTypologyScore=function(){var e=V.a.cloneDeep(n.state.summary.scoresIndividual);e.map((function(e){e.scores.map((function(t){"typology"===t.type&&(t.score=n.mapThroughFarmers({variable:"typology",typology:t.label,selection:e.legumeFunction})),"gender"===t.type&&(t.score=n.mapThroughFarmers({variable:"gender",gender:t.label,selection:e.legumeFunction}))}))})),n.setState((function(t){return Object(C.a)(Object(C.a)({},t),{},{summary:Object(C.a)(Object(C.a)({},t.summary),{},{scoresIndividual:e})})}),(function(){n.calculateAttributeRank()}))},n.updateFarmerSummary=function(){var e=V.a.cloneDeep(n.state.summary.scoresIndividual),t=V.a.cloneDeep(n.state.farmers);e.forEach((function(a,n){e[n].scores[0].score=0;var r=V.a.cloneDeep(e[n].scores[0].score);t.forEach((function(o){o.selections.forEach((function(o,l){o.label==a.legumeFunction.label&&(r+=o.score/t.length,e[n].scores[0].score=parseFloat(parseFloat(r).toFixed(2)),e[n].scores[1].score=parseFloat(parseFloat(5*r/20).toFixed(2)))}))}))})),n.setState((function(t){return Object(C.a)(Object(C.a)({},t),{},{summary:Object(C.a)(Object(C.a)({},t.summary),{},{scoresIndividual:e})})}),(function(){n.updateTypologyScore()}))},n.resultsTable=function(){return Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(w.jsxs)("thead",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{rowSpan:"2",children:"Summary Type"}),Object(w.jsx)("th",{rowSpan:"1",colSpan:n.state.legumeFunctions.length,children:"Function"})]}),Object(w.jsx)("tr",{children:n.state.legumeFunctions.map((function(e){return Object(w.jsx)("th",{children:e.name},"participatory-matrix-head-"+e.label)}))})]}),Object(w.jsx)("tbody",{children:n.state.summary.scoreTypes.map((function(e,t){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name}),n.state.summary.scoresIndividual.map((function(e){return Object(w.jsx)("td",{children:e.scores[t].score})}))]})}))})]})},n.state=V.a.cloneDeep(te),n.addFarmer=n.addFarmer.bind(Object(E.a)(n)),n.farmEntryFields=n.farmEntryFields.bind(Object(E.a)(n)),n.farmerNameInput=n.farmerNameInput.bind(Object(E.a)(n)),n.scoringInput=n.scoringInput.bind(Object(E.a)(n)),n.farmerDetailsSelectInput=n.farmerDetailsSelectInput.bind(Object(E.a)(n)),n.updateFarmerScore=n.updateFarmerScore.bind(Object(E.a)(n)),n.updateTotal=n.updateTotal.bind(Object(E.a)(n)),n.updateFarmerName=n.updateFarmerName.bind(Object(E.a)(n)),n.updateFarmerDetailesSelect=n.updateFarmerDetailesSelect.bind(Object(E.a)(n)),n.tableHeader=n.tableHeader.bind(Object(E.a)(n)),n.tableRows=n.tableRows.bind(Object(E.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(void 0!==this.context.participatoryMatrixScores){var e=this.context.participatoryMatrixScores;this.setState(e)}else{var t=this.state;this.context.participatoryMatrixScores=t}}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.participatoryMatrixScores=e}},{key:"mapThroughFarmers",value:function(e){var t=V.a.cloneDeep(this.state.farmers),a=0,n=0;return t.map((function(t,r){t.selections.map((function(r,o){"typology"===e.variable&&e.typology.toLowerCase()===t.typology.toLowerCase()&&e.selection.label===r.label&&(n+=1,a+=parseFloat(5*r.score/20)),"gender"===e.variable&&e.gender.toLowerCase()===t.gender.toLowerCase()&&e.selection.label===r.label&&(n+=1,a+=parseFloat(5*r.score/20))}))})),n>0?parseFloat(a/n).toFixed(2):parseFloat(a).toFixed(2)}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Participatory Matrix Scoring"}),Object(w.jsx)("p",{children:'Complete participatory matrix scoring exercise. Each individual has 20 beans which they can distribute across legume functions. Use the "Add Farmer" button to add as many farmers as you need for the exercises. These scores are averaged and automatically transcribed into Legume Option Scores.'}),Object(w.jsxs)(D.a,{children:[Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[this.tableHeader(),Object(w.jsx)("tbody",{children:this.tableRows()})]}),Object(w.jsx)(T.a,{className:"float-right",onClick:this.addFarmer,children:"Add Farmer"})]}),this.resultsTable()]})}}]),a}(r.a.Component);ae.contextType=N;for(var ne=ae,re={legumeFunctions:U,male:{pairwiseSelection:[],totals:[]},female:{pairwiseSelection:[],totals:[]},averages:[]},oe=[],le=0;le<re.legumeFunctions.length;le++){var ie=re.legumeFunctions[le];re.male.totals.push({attribute:ie,value:0}),re.female.totals.push({attribute:ie,value:0}),re.averages.push({attribute:ie,value:0});for(var se=0;se<re.legumeFunctions.length;se++){var ce=re.legumeFunctions[se];if(ie!==ce){var ue=[ie.label,ce.label];ue.sort();var me=ue.join("_");oe.includes(me)||(re.male.pairwiseSelection.push({funct1:ie,funct2:ce,identifier:me,value:ie}),re.female.pairwiseSelection.push({funct1:ie,funct2:ce,identifier:me,value:ie}),oe.push(me))}}}var de=re,be=(a(199),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateSelections=function(e,t){if(""!=e.target.value){var a="";e.target.value===t.funct1.name&&(a=t.funct1),e.target.value===t.funct2.name&&(a=t.funct2);var r=n.state[t.gender].pairwiseSelection;r.forEach((function(e,n){e.funct1===t.funct1&&e.funct2===t.funct2&&(r[n].value=a)}));var o=t.gender;n.setState((function(e){return Object(S.a)({},o,Object(C.a)(Object(C.a)({},e[o]),{},{pairfemalewiseSelection:r}))})),n.upDateTotalScore(o)}else alert("Must not select empty value")},n.upDateTotalScore=function(e){var t=n.state[e].totals;t.forEach((function(a,r){t[r].value=0,n.state[e].pairwiseSelection.forEach((function(e){e.value===a.attribute&&t[r].value++}))})),n.setState((function(a){return Object(S.a)({},e,Object(C.a)(Object(C.a)({},a[e]),{},{totals:t}))})),n.updateAverage()},n.updateAverage=function(){var e=n.state.male.totals,t=n.state.female.totals,a=n.state.averages;a.map((function(r,o){var l=(e[o].value+t[o].value)/2;a[o].value=l,n.setState({averages:a})}))},n.pairWiseTable=function(e){e.gender;return Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Pair"}),Object(w.jsx)("th",{children:"Selection Female"}),Object(w.jsx)("th",{children:"Selection Male"})]})}),Object(w.jsx)("tbody",{children:n.state[e.gender].pairwiseSelection.map((function(e,t){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.funct1.name+" vs "+e.funct2.name},"pairwise-ranking-table-item-name"+e.funct1.name+"-"+e.funct2.name),Object(w.jsx)("td",{children:Object(w.jsxs)(M.a,{value:n.state.female.pairwiseSelection[t].value.name,as:"select",onChange:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{funct1:e.funct1,funct2:e.funct2,gender:"female"};return n.updateSelections(t,a)},children:[Object(w.jsx)("option",{children:e.funct1.name}),Object(w.jsx)("option",{children:e.funct2.name})]},"pairwise-ranking-table-form"+e.funct1.name+"-"+e.funct2.name+"-female")},"pairwise-ranking-table-item-form"+e.funct1.name+"-"+e.funct2.name+"-female"),Object(w.jsx)("td",{children:Object(w.jsxs)(M.a,{as:"select",value:n.state.male.pairwiseSelection[t].value.name,onChange:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{funct1:e.funct1,funct2:e.funct2,gender:"male"};return n.updateSelections(t,a)},children:[Object(w.jsx)("option",{children:e.funct1.name}),Object(w.jsx)("option",{children:e.funct2.name})]},"pairwise-ranking-table-form"+e.funct1.name+"-"+e.funct2.name+"-male")},"pairwise-ranking-table-item-form"+e.funct1.name+"-"+e.funct2.name+"-male")]},"pairwise-ranking-table-row"+e.funct1.name+e.funct2.name)}))})]})},n.pairWiseResultsTable=function(e){return Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,className:"table-style",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Attribute"}),Object(w.jsx)("th",{children:"Count Female"}),Object(w.jsx)("th",{children:"Count Male"}),Object(w.jsx)("th",{children:"Average Count"})]})}),Object(w.jsx)("tbody",{children:n.state.legumeFunctions.map((function(e,t){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name},"pairwise-results-table-row-item-"+e.name),Object(w.jsx)("td",{children:n.state.female.totals[t].value},"pairwise-results-table-row-item-female-"+e.name),Object(w.jsx)("td",{children:n.state.male.totals[t].value},"pairwise-results-table-row-item-male-"+e.name),Object(w.jsx)("td",{children:n.state.averages[t].value},"pairwise-results-table-row-item-average-"+e.name)]},"pairwise-results-table-row-"+e.name)}))})]})},n.state=de,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(void 0!==this.context.pairWiseScores){var e=this.context.pairWiseScores;this.setState(e)}else{var t=this.state;this.context.pairWiseScores=t}this.upDateTotalScore("male"),this.upDateTotalScore("female")}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.pairWiseScores=e,console.log(this.state)}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Pairwise Component Ranking"}),Object(w.jsx)("p",{children:"Select the most important attribute out of the following pairs"}),Object(w.jsxs)("div",{className:"table-container",children:[Object(w.jsx)(D.a,{className:"table-container",children:this.pairWiseTable({gender:"female"})}),this.pairWiseResultsTable({gender:"female",className:"results-table-pairwise"})]}),Object(w.jsx)("div",{className:"table-container"})]})}}]),a}(n.Component));be.contextType=N;var fe=be,pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderComponents=function(){},n.state={components:[Object(w.jsx)(Z,{},"contextScore"),Object(w.jsx)(fe,{},"pairwise"),Object(w.jsx)(ne,{},"matrix"),Object(w.jsx)(_,{},"agroeco")]},n}return Object(s.a)(a,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Data Entry"}),Object(w.jsxs)("div",{className:"data-entry-container",children:[this.state.components.map((function(e){return e})),";"]})]})}}]),a}(r.a.Component),he=(a(200),[]),je=V.a.cloneDeep(U);je.forEach((function(e){he.push({legumeFunction:e,score:0})}));var xe=[],ge=V.a.cloneDeep(W);ge.forEach((function(e){xe.push({attribute:e,score:0})}));var ve={functionFit:[],contextFit:[],agroEcoFit:[]};ge.map((function(e){ve.contextFit.push({attribute:e,score:0})})),ve.contextFit.push({overallFit:0}),ve.contextFit.push({overallRank:1}),je.map((function(e){ve.functionFit.push({legumeFunction:e,score:0})})),ve.functionFit.push({overallFit:0}),ve.functionFit.push({overallRank:1});var ye=V.a.cloneDeep(z);ye.map((function(e){ve.agroEcoFit.push({agroEcoFilter:e,score:0})})),ve.agroEcoFit.push({overallFit:0}),ve.agroEcoFit.push({overallRank:1});var Oe=V.a.cloneDeep(z),ke=[];Oe.map((function(e){ke.push({name:e.name,label:e.label})}));var we={legumeFunctions:je,attributes:W,agroEcoFilters:ke,agroEcoFitSummary:ye,functionFitSummary:he,contextFitSummary:xe,emptyScoresForLegume:ve,legumes:[],formFilled:!1},Fe=[{name:"Pigeon pea (Cajanus cajan)",type:"Grain legume perennial",food:4,feed:2,income:3,"erosion-control":3,fuel:2,"soil-fertility":3,land:1,labour:2,seed:1,"inp-serv":1,"knowl-skill":2,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:530,max:4030}],temp:[{min:16,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:4.5,max:8}]},{name:"Climbing beans (Phaseolus vulgaris), local types available in W Ethiopia, harvested several (4-5) years before reseeding)",type:"Grain legume perennial",food:4,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:1,labour:1,seed:1,"inp-serv":2,"knowl-skill":2,water:3,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:3e3}],temp:[{min:6,max:29}],alt:[{min:500,max:2e3}],soilpH:[{min:5,max:7}]},{name:"Climbing beans (Phaseolus vulgaris) annual type",type:"Grain legume seasonal",food:4,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:1,labour:3,seed:2,"inp-serv":3,"knowl-skill":3,water:3,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:3e3}],temp:[{min:6,max:29}],alt:[{min:500,max:2e3}],soilpH:[{min:5,max:7}]},{name:"Bush bean (Phaseolus vulgaris)",type:"Grain legume seasonal",food:4,feed:1,income:4,"erosion-control":1,fuel:1,"soil-fertility":1,land:2,labour:3,seed:1,"inp-serv":2,"knowl-skill":3,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:3e3}],temp:[{min:6,max:29}],alt:[{min:500,max:2e3}],soilpH:[{min:5,max:7}]},{name:"Groundnuts (Arachis hypogaea L.)",type:"Grain legume seasonal",food:3,feed:2,income:4,"erosion-control":2,fuel:1,"soil-fertility":3,land:4,labour:4,seed:1,"inp-serv":3,"knowl-skill":3,water:2,markets:1,"agroecology-source":"Lexsys",rainfall:[{min:310,max:3e3}],temp:[{min:10,max:45}],alt:[{min:0,max:1600}],soilpH:[{min:4,max:8}]},{name:"Soybean grain type (Glycine max L.)",type:"Grain legume seasonal",food:3,feed:2,income:4,"erosion-control":2,fuel:1,"soil-fertility":2,land:3,labour:3,seed:2,"inp-serv":3,"knowl-skill":3,water:2,markets:4,"agroecology-source":"Lexsys",rainfall:[{min:700,max:2e3}],temp:[{min:10,max:30}],alt:[{min:0,max:1400}],soilpH:[{min:5,max:7}]},{name:"Soybean/dual purpose grain plus fodder (Glycine max L.)",type:"Grain legume seasonal",food:2,feed:2,income:4,"erosion-control":3,fuel:1,"soil-fertility":4,land:3,labour:3,seed:2,"inp-serv":3,"knowl-skill":3,water:2,markets:4,"agroecology-source":"Lexsys",rainfall:[{min:700,max:2e3}],temp:[{min:10,max:30}],alt:[{min:0,max:1400}],soilpH:[{min:5,max:7}]},{name:"Faba bean (Vicia faba L.) ",type:"Grain legume seasonal",food:4,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:300,max:2090}],temp:[{min:6,max:28}],alt:[{min:1800,max:3200}],soilpH:[{min:4.5,max:8.3}]},{name:"Cowpea \u2013 grain type (Vigna unguiculata)",type:"Grain legume seasonal",food:4,feed:1,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:2,labour:3,seed:2,"inp-serv":3,"knowl-skill":2,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:400,max:2e3}],temp:[{min:13,max:28}],alt:[{min:0,max:1500}],soilpH:[{min:4.3,max:7.9}]},{name:"Cowpea \u2013 forage type (Vigna unguiculata)",type:"Grain legume seasonal",food:2,feed:4,income:2,"erosion-control":2,fuel:0,"soil-fertility":2,land:2,labour:3,seed:3,"inp-serv":3,"knowl-skill":2,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:400,max:2e3}],temp:[{min:13,max:28}],alt:[{min:0,max:1500}],soilpH:[{min:4.3,max:7.9}]},{name:"Bambara nut (Voandzou subterraneous)",type:"Grain legume seasonal",food:4,feed:0,income:0,"erosion-control":1,fuel:0,"soil-fertility":2,land:1,labour:1,seed:1,"inp-serv":2,"knowl-skill":1,water:1,markets:2,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Chickpea (Cicer arietinum L.) \u2013 desi type (for food)- following the main crop",type:"Grain legume seasonal",food:4,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:2,labour:3,seed:1,"inp-serv":3,"knowl-skill":2,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:1500}],temp:[{min:7,max:28}],alt:[{min:1170,max:1900}],soilpH:[{min:5,max:8.3}]},{name:"Chickpea (Cicer arietinum L.) \u2013 kabuli type (for export)-main crop",type:"Grain legume seasonal",food:3,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:3,labour:3,seed:3,"inp-serv":3,"knowl-skill":3,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:600,max:1500}],temp:[{min:7,max:28}],alt:[{min:1170,max:1900}],soilpH:[{min:5,max:8.3}]},{name:"Green grams/Mung bean (Vigna radiata)",type:"Grain legume seasonal",food:4,feed:1,income:4,"erosion-control":1,fuel:0,"soil-fertility":1,land:2,labour:3,seed:1,"inp-serv":2,"knowl-skill":1,water:2,markets:3,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Lentils (Lens culinaris Medik.)",type:"Grain legume seasonal",food:4,feed:3,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:2,labour:3,seed:2,"inp-serv":2,"knowl-skill":2,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:280,max:2430}],temp:[{min:6,max:27}],alt:[{min:1e3,max:3800}],soilpH:[{min:4.5,max:8.2}]},{name:"Lupins \u2013 Sweet lupin (new), traditional (Et)",type:"Grain legume seasonal",food:2,feed:1,income:3,"erosion-control":2,fuel:1,"soil-fertility":4,land:1,labour:1,seed:2,"inp-serv":0,"knowl-skill":1,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:350,max:1660}],temp:[{min:6,max:26}],alt:[{min:1600,max:3e3}],soilpH:[{min:5,max:7}]},{name:"Field Pea (Pisum sativum L), adapted to high rainfall environment",type:"Grain legume seasonal",food:4,feed:3,income:4,"erosion-control":2,fuel:0,"soil-fertility":2,land:3,labour:2,seed:2,"inp-serv":1,"knowl-skill":2,water:3,markets:1,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Field pea (Pisum absynicum var. sativum)-adapted to low rainfall environment",type:"Grain legume seasonal",food:4,feed:3,income:3,"erosion-control":2,fuel:1,"soil-fertility":2,land:2,labour:2,seed:3,"inp-serv":1,"knowl-skill":2,water:1,markets:2,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Grass pea \u2013 (Lathyrus spp)",type:"Grain legume seasonal",food:3,feed:1,income:3,"erosion-control":1,fuel:0,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":1,"knowl-skill":1,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:320,max:1360}],temp:[{min:5,max:27}],alt:[{min:800,max:3e3}],soilpH:[{min:4.5,max:8.3}]},{name:"Cluster bean (Cyamopsis tetragonoloba L.)",type:"Grain legume seasonal",food:3,feed:1,income:3,"erosion-control":1,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:380,max:2410}],temp:[{min:12,max:35}],alt:[{min:0,max:1e3}],soilpH:[{min:5.3,max:8.3}]},{name:"Dolichos lablab (Lablab purpureus)- for grain",type:"Grain legume seasonal",food:4,feed:4,income:3,"erosion-control":2,fuel:1,"soil-fertility":3,land:2,labour:3,seed:2,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:600,max:2500}],temp:[{min:15,max:35}],alt:[{min:0,max:2100}],soilpH:[{min:4.5,max:7.8}]},{name:"French beans (Phaseolus vulgaris)",type:"Grain legume seasonal",food:4,feed:0,income:4,"erosion-control":1,fuel:0,"soil-fertility":1,land:2,labour:3,seed:4,"inp-serv":4,"knowl-skill":3,water:4,markets:4,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Desmodium silverleaf (Desmodium uncinatum)",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:2,"erosion-control":3,fuel:0,"soil-fertility":3,land:3,labour:1,seed:3,"inp-serv":1,"knowl-skill":2,water:2,markets:3,"agroecology-source":"SoFT",rainfall:[{min:750,max:2400}],temp:[{min:3,max:35}],alt:[{min:0,max:2500}],soilpH:[{min:6.5,max:7.5}]},{name:"Clover (Trifolium)",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:1,"erosion-control":2,fuel:0,"soil-fertility":2,land:1,labour:3,seed:3,"inp-serv":2,"knowl-skill":3,water:3,markets:0,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Alfalfa/lucerne (Medicago sativa)",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:3,income:2,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:500,max:2700}],temp:[{min:4,max:27}],alt:[{min:300,max:3e3}],soilpH:[{min:5.5,max:8.8}]},{name:"Stylosanthes guianensis - semi-erect -forage type",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:500,max:2e3}],temp:[{min:15,max:27}],alt:[{min:0,max:2e3}],soilpH:[{min:4,max:7.7}]},{name:"Stylosanthes hamata - bush/branching type-forage type",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:1700}],temp:[{min:22,max:30}],alt:[{min:0,max:500}],soilpH:[{min:4,max:6}]},{name:"Stylosanthes scabra -erect - forage type",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:500,max:1700}],temp:[{min:20,max:30}],alt:[{min:0,max:600}],soilpH:[{min:4,max:7}]},{name:"Hairy Vetch (Vicia villosa )",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":2,"knowl-skill":3,water:3,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:310,max:1660}],temp:[{min:4,max:21}],alt:[{min:1800,max:3e3}],soilpH:[{min:4.9,max:8.2}]},{name:"Vicia dasycarpa",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":2,"knowl-skill":3,water:3,markets:2,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Velvet bean (Mucuna pruriens) ",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:0,feed:1,income:0,"erosion-control":3,fuel:0,"soil-fertility":4,land:3,labour:2,seed:3,"inp-serv":2,"knowl-skill":2,water:1,markets:4,"agroecology-source":"Lexsys",rainfall:[{min:650,max:3e3}],temp:[{min:15,max:35}],alt:[{min:0,max:2100}],soilpH:[{min:4.5,max:7.7}]},{name:"Lablab- forage type (Lablab purpureus)",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:3,feed:4,income:3,"erosion-control":2,fuel:1,"soil-fertility":3,land:2,labour:3,seed:2,"inp-serv":2,"knowl-skill":2,water:2,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:600,max:2500}],temp:[{min:15,max:35}],alt:[{min:0,max:2100}],soilpH:[{min:4.5,max:7.8}]},{name:"Crotolaria juncea",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:0,feed:1,income:0,"erosion-control":3,fuel:0,"soil-fertility":4,land:2,labour:3,seed:2,"inp-serv":2,"knowl-skill":2,water:2,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:490,max:4290}],temp:[{min:8,max:35}],alt:[{min:0,max:2500}],soilpH:[{min:4.5,max:7.5}]},{name:"Calliandra calothyrus",type:"Tree legumes - coppicing",food:0,feed:4,income:2,"erosion-control":4,fuel:3,"soil-fertility":3,land:1,labour:1,seed:3,"inp-serv":1,"knowl-skill":2,water:2,markets:3,"agroecology-source":"SoFT",rainfall:[{min:1200,max:4290}],temp:[{min:10,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:4.5,max:7.5}]},{name:"Gliricidia sepium",type:"Tree legumes - coppicing",food:0,feed:3,income:1,"erosion-control":4,fuel:4,"soil-fertility":4,land:2,labour:2,seed:3,"inp-serv":1,"knowl-skill":1,water:1,markets:4,"agroecology-source":"SoFT",rainfall:[{min:800,max:4e3}],temp:[{min:15,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:4.3,max:8}]},{name:"Leucaena leucocephala",type:"Tree legumes - coppicing",food:0,feed:4,income:0,"erosion-control":4,fuel:4,"soil-fertility":4,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:500,max:4100}],temp:[{min:15,max:35}],alt:[{min:0,max:1350}],soilpH:[{min:4.6,max:8.7}]},{name:"Leucaena trichandra",type:"Tree legumes - coppicing",food:0,feed:4,income:2,"erosion-control":3,fuel:4,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:900,max:3500}],temp:[{min:10,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:5,max:8.7}]},{name:"Leucaena diversifolia",type:"Tree legumes - coppicing",food:0,feed:4,income:2,"erosion-control":3,fuel:4,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:500,max:4e3}],temp:[{min:3,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:5,max:8.7}]},{name:"Tree lucerne (Chamaecytisus palmensis)",type:"Tree legumes \u2013 coppicing",food:0,feed:4,income:2,"erosion-control":3,fuel:4,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:300,max:1600}],temp:[{min:3,max:28}],alt:[{min:1e3,max:2500}],soilpH:[{min:5,max:8.7}]},{name:"Sesbania sesban",type:"Tree legumes \u2013 non coppicing",food:0,feed:4,income:2,"erosion-control":4,fuel:3,"soil-fertility":3,land:1,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:2,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:500,max:2500}],temp:[{min:15,max:30}],alt:[{min:0,max:2300}],soilpH:[{min:5,max:7.5}]},{name:"Sesbania grandiflora",type:"Tree legumes \u2013 non coppicing",food:0,feed:3,income:2,"erosion-control":3,fuel:3,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:700,max:3e3}],temp:[{min:22,max:35}],alt:[{min:0,max:1e3}],soilpH:[{min:4.5,max:8.7}]},{name:"Tephrosia (Tephrosia vogelii)",type:"Tree legumes \u2013 non coppicing",food:0,feed:0,income:2,"erosion-control":3,fuel:4,"soil-fertility":4,land:2,labour:3,seed:2,"inp-serv":1,"knowl-skill":1,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:870,max:2670}],temp:[{min:13,max:29}],alt:[{min:0,max:2100}],soilpH:[{min:4.5,max:6.5}]},{name:"Faidherbia albidia",type:"Tree legumes \u2013 non coppicing",food:0,feed:3,income:2,"erosion-control":3,fuel:3,"soil-fertility":4,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Acacia angustissima",type:"Tree legumes \u2013 non coppicing",food:0,feed:2,income:3,"erosion-control":3,fuel:4,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:800,max:3e3}],temp:[{min:10,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:5,max:8.7}]}],Se=[],Ce=[];Fe.map((function(e){Se.includes(e.type)||Se.push(e.type),Ce.includes(e["agroecology-source"])||null===e["agroecology-source"]||Ce.push(e["agroecology-source"])}));var Le={allLegumes:Fe,legumeTypes:Se,sources:Ce},Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).initialiseResults=function(){var e=V.a.cloneDeep(Le.allLegumes.slice(0,1));e.map((function(e){e.results=V.a.cloneDeep(n.state.emptyScoresForLegume)}));var t=V.a.cloneDeep(n.context.agroEcoData),a=V.a.cloneDeep(n.context.contextScores.scores),r=V.a.cloneDeep(n.state.contextFitSummary);r.map((function(e){a.map((function(t){"average"===t.scoreType&&e.attribute.label===t.attribute.label&&(e.score=4-t.score)}))}));var o=V.a.cloneDeep(n.context.pairWiseScores.averages),l=V.a.cloneDeep(n.context.participatoryMatrixScores.summary.scoresIndividual),i=V.a.cloneDeep(n.state.functionFitSummary);i.map((function(e){o.map((function(t){t.attribute.label===e.legumeFunction.label&&(e.pairwisescore=t.value)}))})),i.map((function(e){l.map((function(t){t.legumeFunction.label===e.legumeFunction.label&&(e.matrixscore=t.scores[1].score)}))})),i.map((function(e){e.score=parseFloat((e.pairwisescore/2+e.matrixscore/2).toFixed(2))})),n.setState({legumes:e,agroEcoFitSummary:t.biofilters,contextFitSummary:r,functionFitSummary:i},(function(){n.calculateLegumeScores()}))},n.legumeContextScores=function(e){console.log("Legume Context: "+e.legumecontext),console.log("Form Context: "+e.formcontext);var t=parseFloat(e.legumecontext),a=parseFloat(e.formcontext);if(t-a>-.5&&t-a<=0){var n=4+(t-a)/2;if(n>0)return n}if(t-a<.5&&t-a>=0){var r=4-(t-a)/2;if(r>0)return r}if(t>a){var o=4-2*(t-a);if(o>0)return o}return a>t?4:0},n.legumeFunctionScores=function(e){var t=e.formfunction,a=e.legumefunction;return 0===t?0:a<t?a*t/8:a*t/4},n.legumeAgroEcoScores=function(e){var t=e.legumeMin,a=e.legumeMax,n=e.formvalue;return n>=t&&n<=a?1:0},n.calculateLegumeScores=function(){var e=V.a.cloneDeep(n.state.legumes);e.map((function(e){e.results.contextFit.map((function(t){n.state.contextFitSummary.map((function(a){void 0!==t.attribute&&a.attribute.label===t.attribute.label&&(console.log("Legume Attribute: "+a.attribute.label),t.score=n.legumeContextScores({legumecontext:e[a.attribute.label],formcontext:a.score}),console.log(t.score))}))})),e.results.functionFit.map((function(t){n.state.functionFitSummary.map((function(a){void 0!==a.legumeFunction&&void 0!==t.legumeFunction&&a.legumeFunction.label===t.legumeFunction.label&&(t.score=n.legumeFunctionScores({formfunction:a.score,legumefunction:e[a.legumeFunction.label]}))}))})),e.results.agroEcoFit.map((function(t){n.state.agroEcoFitSummary.map((function(a){void 0!==t.agroEcoFilter&&t.agroEcoFilter.label===a.label&&(t.score=n.legumeAgroEcoScores({legumeMin:e[a.label][0].min,legumeMax:e[a.label][0].max,formvalue:a.value}))}))}))})),e.map((function(e){var t=0;e.results.agroEcoFit.forEach((function(e){void 0!==e.agroEcoFilter&&(t+=e.score)})),e.results.agroEcoFit.forEach((function(e){void 0!==e.overallFit&&(e.overallFit=t)}));var a=0;e.results.contextFit.forEach((function(e){void 0!==e.attribute&&(a+=e.score)})),e.results.contextFit.forEach((function(e){void 0!==e.overallFit&&(e.overallFit=a)}));var n=0;e.results.functionFit.forEach((function(e){void 0!==e.legumeFunction&&(n+=e.score)})),e.results.functionFit.forEach((function(e){void 0!==e.overallFit&&(e.overallFit=n)}))})),n.setState({legumes:e})},n.checkFormFilled=function(){void 0!==n.context.agroEcoData&&void 0!==n.context.contextScores&&void 0!==n.context.pairWiseScores&&void 0!==n.context.participatoryMatrixScores&&n.setState({formFilled:!0},(function(){n.initialiseResults()}))},n.returnResultsForSummaryTable=function(e){return void 0!==e.item.score?Object(w.jsx)("td",{children:parseFloat(e.item.score).toFixed(2)}):void 0!==e.item.overallFit?Object(w.jsx)("td",{children:parseFloat(e.item.overallFit).toFixed(2)}):void 0!==e.item.overallRank?Object(w.jsx)("td",{children:parseFloat(e.item.overallRank).toFixed(2)}):void 0},n.renderLegumeResults=function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"AgroEco Fit"}),Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(w.jsxs)("thead",{children:[Object(w.jsx)("th",{children:"Legume Name"}),n.state.agroEcoFilters.map((function(e){return Object(w.jsx)("th",{children:e.label})})),Object(w.jsx)("th",{children:"total score"}),Object(w.jsx)("th",{children:"overall rank"})]}),Object(w.jsx)("tbody",{children:n.state.legumes.map((function(e){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name}),e.results.agroEcoFit.map((function(e){return n.returnResultsForSummaryTable({item:e})}))]})}))})]}),Object(w.jsx)("h1",{children:"Context Fit"}),Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(w.jsxs)("thead",{children:[Object(w.jsx)("th",{children:"Legume Name"}),n.state.attributes.map((function(e){return Object(w.jsx)("th",{children:e.label})})),Object(w.jsx)("th",{children:"total score"}),Object(w.jsx)("th",{children:"overall rank"})]}),Object(w.jsx)("tbody",{children:n.state.legumes.map((function(e){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name}),e.results.contextFit.map((function(e){return n.returnResultsForSummaryTable({item:e})}))]})}))})]}),Object(w.jsx)("h1",{children:"Functional Fit"}),Object(w.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(w.jsxs)("thead",{children:[Object(w.jsx)("th",{children:"Legume Name"}),n.state.legumeFunctions.map((function(e){return Object(w.jsx)("th",{children:e.label})})),Object(w.jsx)("th",{children:"total score"}),Object(w.jsx)("th",{children:"overall rank"})]}),Object(w.jsx)("tbody",{children:n.state.legumes.map((function(e){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name}),e.results.functionFit.map((function(e){return n.returnResultsForSummaryTable({item:e})}))]})}))})]})]})},n.renderBody=function(){return!1===n.state.formFilled?Object(w.jsx)("h1",{children:"No data entered yet. Please fill in data-entry form"}):!0===n.state.formFilled?n.renderLegumeResults():void 0},n.state=we,n.initialiseResults=n.initialiseResults.bind(Object(E.a)(n)),n.legumeContextScores=n.legumeContextScores.bind(Object(E.a)(n)),n.legumeFunctionScores=n.legumeFunctionScores.bind(Object(E.a)(n)),n.legumeAgroEcoScores=n.legumeAgroEcoScores.bind(Object(E.a)(n)),n.calculateLegumeScores=n.calculateLegumeScores.bind(Object(E.a)(n)),n.checkFormFilled=n.checkFormFilled.bind(Object(E.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(void 0!==this.context.results){var e=this.context.results;this.setState(e)}else{var t=this.state;this.context.results=t}this.checkFormFilled()}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.results=e}},{key:"render",value:function(){return Object(w.jsx)("div",{children:this.renderBody()})}}]),a}(n.Component);Ee.contextType=N;var De=Ee,Te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"App Context"}),Object(w.jsx)("pre",{children:JSON.stringify(this.context,null,2)})]})}}]),a}(n.Component);Te.contextType=N;var He=Te,Ne=30,Ae="sidebar-nav-link",Ie=[{title:"Home",routeKey:"home-route",component:Object(w.jsx)(F,{}),path:"/home",icon:Object(w.jsx)(f.a,{size:Ne}),cName:Ae},{title:"Data Entry",routeKey:"data-entry-route",component:Object(w.jsx)(pe,{}),path:"/data-entry",icon:Object(w.jsx)(f.b,{size:Ne}),cName:Ae},{title:"Results",routeKey:"results-route",component:Object(w.jsx)(De,{}),path:"/results",icon:Object(w.jsx)(x.a,{size:Ne}),cName:Ae},{title:"Admin",routeKey:"admin-route",component:Object(w.jsx)(H,{}),path:"/admin",icon:Object(w.jsx)(p.a,{size:Ne}),cName:Ae},{title:"Login",routeKey:"login-route",component:Object(w.jsx)(I,{}),path:"/login",icon:Object(w.jsx)(h.a,{size:Ne}),cName:Ae},{title:"View App Data",routeKey:"app-data-route",component:Object(w.jsx)(He,{}),path:"/app-data",icon:Object(w.jsx)(j.a,{size:Ne}),cName:Ae}],Re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).toggleSidebar=function(){n.setState({sideBarOpen:!n.state.sideBarOpen})},n.state={sideBarOpen:!1},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"container_row",children:[Object(w.jsx)("div",{className:"menu-button",children:Object(w.jsx)("a",{onClick:this.toggleSidebar,children:Object(w.jsx)(f.c,{size:50,color:"black"})})}),Object(w.jsxs)("div",{className:this.state.sideBarOpen?"sidebar-container active":"sidebar-container",children:[Object(w.jsxs)("div",{className:"sidebar-header-container",children:[Object(w.jsx)("h2",{children:"LegumeCHOICE"}),Object(w.jsx)("a",{onClick:this.toggleSidebar,children:Object(w.jsx)("div",{className:"close-menu-icon",children:Object(w.jsx)(b.a,{size:40,color:"white"})})})]},"sidebar-header "),Object(w.jsx)("div",{className:"link-container",children:Object(w.jsx)("ul",{children:Ie.map((function(t,a){return Object(w.jsx)(m.b,{className:t.cName,to:t.path,onClick:e.toggleSidebar,children:Object(w.jsx)("div",{className:"sidebar-list-item",children:Object(w.jsxs)("li",{className:"sidebar-list-item",children:[Object(w.jsx)("span",{className:"side-bar-link-icon",children:t.icon}),Object(w.jsx)("span",{className:"side-bar-link-text",children:t.title})]},a+"-list-item")})},a+"-link-item")}))})})]})]})}}]),a}(r.a.Component),Me=(a(206),a(207),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){return Object(w.jsx)(m.a,{basename:"/legume-choice-client/",children:Object(w.jsxs)("div",{children:[Object(w.jsx)(Re,{}),Object(w.jsx)("div",{className:"outer-page-container",children:Object(w.jsx)("div",{className:"inner-page-container",children:Object(w.jsx)(d.d,{children:Object(w.jsxs)(N.Provider,{value:{},children:[Ie.map((function(e){return Object(w.jsx)(d.b,{exact:!0,path:e.path,children:e.component},e.routeKey)})),Object(w.jsx)(d.a,{exact:!0,from:"/",to:"/home"})]})})})})]})})}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ge=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,209)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)}))};l.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Me,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Ge()},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){}},[[208,1,2]]]);
//# sourceMappingURL=main.4fc06dc2.chunk.js.map