(this["webpackJsonplegume-choice-client"]=this["webpackJsonplegume-choice-client"]||[]).push([[0],{107:function(e,a,t){},108:function(e,a,t){},109:function(e,a,t){},204:function(e,a,t){},206:function(e,a,t){},207:function(e,a,t){},209:function(e,a,t){},211:function(e,a,t){},212:function(e,a,t){},213:function(e,a,t){},214:function(e,a,t){},215:function(e,a,t){},222:function(e,a,t){},223:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),o=t(49),i=t.n(o),l=(t(107),t(10)),c=t(11),s=t(13),u=t(12),m=t(51),d=t(14),b=t(97),f=t(42),p=(t(108),t(94)),h=t(95),j=t(96),x=t(63),g=(t(109),t(38)),v=t.n(g),O=t(91),y=t.n(O),F=t.p+"static/media/home-component-markdown.0579c1b4.md",S=t(1),k=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={file:F,markdown:""},n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.get(this.state.file).then((function(a){e.setState({markdown:a.data})}))}},{key:"render",value:function(){return Object(S.jsx)("div",{children:Object(S.jsx)(y.a,{children:this.state.markdown})})}}]),t}(n.Component),w=t(19),C=t(5),T=t(39),L=t(7),E=t(32),N=t(100),A=(t(204),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).addUserlocal=function(e){e.preventDefault();var a=n.state.usersLocal,t=n.state.formEntry;""!==t.username?a.some((function(e){return e.username===t.username}))?alert("Username already exists"):a.some((function(e){return e.email===t.email}))?alert("email already registered"):n.setState({usersLocal:[].concat(Object(T.a)(a),[t]),formEntry:{username:"",email:""}}):alert("No username entered")},n.handleChange=function(e){e.preventDefault();var a=[e.target.name],t=e.target.value;n.setState((function(e){return{formEntry:Object(C.a)(Object(C.a)({},e.formEntry),{},Object(w.a)({},a,t))}}))},n.deleteUser=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.preventDefault();var t=n.state.usersLocal,r=t.filter((function(e){return e.email!==a.email||e.username!==a.username}));n.setState((function(e){return{usersLocal:r}}))},n.subsetArrays=function(e,a){return e.map((function(e){return e[a]}))},n.saveChanges=function(e){var a,t,r=n.state.usersLocal,o=n.state.usersOnline;a=r.filter((function(e){return!n.subsetArrays(o,"email").includes(e.email)&&!n.subsetArrays(o,"username").includes(e.username)})),t=o.filter((function(e){return!n.subsetArrays(r,"email").includes(e.email)&&!n.subsetArrays(r,"username").includes(e.username)})),a.length>0&&v()({method:"post",url:"https://l-gorman.com/api/users/insertmany/",data:{newUsers:a},headers:{accept:"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),t.length>0&&v()({method:"post",url:"https://l-gorman.com/api/users/deletemany/",data:{deleteUsers:t},headers:{accept:"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),n.setState((function(){return{usersOnline:r}}))},n.userForm=function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:"form-container",children:[Object(S.jsx)("h2",{children:"New Users"}),Object(S.jsxs)(E.a,{onSubmit:n.addUserlocal,children:[Object(S.jsxs)(E.a.Group,{controlId:"basicusername",children:[Object(S.jsx)(E.a.Label,{children:"Username"}),Object(S.jsx)(E.a.Control,{name:"username",type:"text",onChange:n.handleChange})]}),Object(S.jsxs)(E.a.Group,{controlId:"basicemail",children:[Object(S.jsx)(E.a.Label,{children:"Email"}),Object(S.jsx)(E.a.Control,{name:"email",type:"email",onChange:n.handleChange})]}),Object(S.jsx)(N.a,{className:"delete-button",variant:"primary",type:"submit",children:"Add User"})]})]}),Object(S.jsxs)("div",{className:"form-container",children:[Object(S.jsx)("h2",{children:"Users"}),n.state.usersLocal.map((function(e,a){return Object(S.jsxs)("div",{className:"user-container",children:[a+1,". ",e.username," (",e.email,")",Object(S.jsx)("div",{className:"deleteButton",children:Object(S.jsx)(N.a,{onClick:function(a){return n.deleteUser(a,{id:e._id,username:e.username,email:e.email})},children:"Delete User"})})]},"user "+e.email+" "+e.username)})),Object(S.jsx)("div",{className:"user-container",children:Object(S.jsx)(N.a,{onClick:n.saveChanges,className:"deleteButton",children:"Submit"})})]})]})},n.state={usersLocal:[],usersOnline:[],formEntry:{username:"",email:""}},n.handleChange=n.handleChange.bind(Object(L.a)(n)),n.addUserlocal=n.addUserlocal.bind(Object(L.a)(n)),n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;v()({method:"get",url:"https://l-gorman.com/api/users",headers:{accept:"application/json"}}).then((function(a){e.setState({usersLocal:a.data,usersOnline:a.data})})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(){console.log(this.state)}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Admin component"}),Object(S.jsx)(this.userForm,{})]})}}]),t}(n.Component)),M=Object(n.createContext)(),D=(t(206),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e,a){n.setState(Object(w.a)({},a.variable,e.target.value)),n.context.user=n.state},n.authenticateUser=function(e){e.preventDefault(),n.setState({authenticated:!0})},n.state={username:"",projectID:"",password:"",authenticated:!1},n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){if(void 0!==this.context.user){var e=this.context.user;this.setState(e)}}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.user=e,console.log(this.context)}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"form-container",children:[Object(S.jsx)("h1",{children:"Project Information"}),Object(S.jsxs)(E.a,{children:[Object(S.jsx)(E.a.Label,{children:"Username"}),Object(S.jsx)(E.a.Control,{type:"text",value:this.state.username,onChange:function(a){return e.handleChange(a,{variable:"username"})}}),Object(S.jsx)(E.a.Label,{children:"Project ID"}),Object(S.jsx)(E.a.Control,{type:"text",value:this.state.projectID,onChange:function(a){return e.handleChange(a,{variable:"projectID"})}}),Object(S.jsx)(E.a.Label,{children:"Password"}),Object(S.jsx)(E.a.Control,{type:"password",value:this.state.password,onChange:function(a){return e.handleChange(a,{variable:"password"})}}),Object(S.jsx)(N.a,{className:"submitButton",type:"submit",onClick:this.authenticateUser,children:"Authenticate"})]})]})}}]),t}(r.a.Component));D.contextType=M;var I=D,R=(t(207),t(26)),H=t(20),G=t(6),P=t.n(G),B=[{name:"Food",label:"food"},{name:"Feed",label:"feed"},{name:"Income",label:"income"},{name:"Erosion Control",label:"erosion-control"},{name:"Fuel",label:"fuel"},{name:"Soil Fertility",label:"soil-fertility"}],U=[{name:"Low",label:"low"},{name:"Medium",label:"med"},{name:"High",label:"high"}],V=[{name:"Farmer",label:"farmer"},{name:"Expert",label:"expert"}],K=[{name:"Land",label:"land"},{name:"Labour",label:"labour"},{name:"Seed",label:"seed"},{name:"Inputs and services",label:"inp-serv"},{name:"Knowledge and skills",label:"knowl-skill"},{name:"Water",label:"water"},{name:"Markets",label:"markets"}],z=[{name:"Rainfall (mm/year)",label:"rainfall",minValue:280,maxValue:4290,value:2285},{name:"Temperature (mean \xb0C/month)",label:"temp",minValue:0,maxValue:45,value:22.5},{name:"Altitude (average masl)",label:"alt",minValue:0,maxValue:3800,value:1900},{name:"Soil pH (average)",label:"soilpH",minValue:4,maxValue:9,value:6.5}],W={biofilters:P.a.cloneDeep(z)},J=(t(209),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).tableHeader=function(){return Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Biofilters"}),Object(S.jsx)("th",{children:"Site Values"})]})})},n.renderDefaultValue=function(e){return e.value},n.tableBody=function(){return Object(S.jsx)("tbody",{children:n.state.biofilters.map((function(e,a){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),Object(S.jsx)("td",{children:Object(S.jsx)(H.a,{type:"number",value:n.renderDefaultValue({value:e.value}),onChange:function(a){n.handleChange(a,{biofilter:e})}})})]},"agro-eco-table"+e.label)}))})},n.handleChange=function(e,a){var t=n.state.biofilters;t.forEach((function(n,r){n.label===a.biofilter.label&&(t[r].value=parseFloat(e.target.value))})),n.setState({biofilters:t})},n.state=P.a.cloneDeep(W),n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){if(void 0!==this.context.agroEcoData){var e=this.context.agroEcoData;this.setState(e)}else{var a=this.state;this.context.agroEcoData=a}}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.agroEcoData=e,console.log(this.context.agroEcoData)}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Agroecological Filter"}),Object(S.jsx)("div",{className:"table-container",children:Object(S.jsx)(E.a,{children:Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[this.tableHeader(),this.tableBody()]})})})]})}}]),t}(r.a.Component));J.contextType=M;for(var Z=J,Y={attributes:K,participants:V,typologies:U,scores:[]},Q=0;Q<K.length;Q++){Y.scores.push({scoreType:"average",attribute:K[Q],score:0});for(var q=0;q<V.length;q++)for(var X=0;X<U.length;X++)Y.scores.push({scoreType:"individual",attribute:K[Q],participant:V[q],typology:U[X],score:0})}var _=t(93),$=t.n(_),ee=(t(210),t(211),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).renderRadarChart=function(){var e={},a={};n.state.scores.forEach((function(t){"average"===t.scoreType&&(e[t.attribute.label]=t.score/4,a[t.attribute.label]=t.attribute.name)}));var t=[{data:e,meta:{class:"radar-style",color:"green"}}],r={size:200,axes:!0,scales:5,captions:!0,captionMargin:10,dots:!0,zoomDistance:1.2,setViewBox:function(e){return"-".concat(e.captionMargin," 0 ").concat(e.size+2*e.captionMargin," ").concat(e.size)},smoothing:function(e){for(var a="M"+e[0][0].toFixed(4)+","+e[0][1].toFixed(4),t=1;t<e.length;t++)a+="L"+e[t][0].toFixed(4)+","+e[t][1].toFixed(4);return a+"z"},axisProps:function(){return{className:"axis"}},scaleProps:function(){return{className:"scale",fill:"none"}},shapeProps:function(){return{className:"shape"}},captionProps:function(){return{className:"caption",textAnchor:"middle",fontSize:10,fontFamily:"sans-serif"}},dotProps:function(){return{className:"dot",mouseEnter:function(e){console.log(e)},mouseLeave:function(e){console.log(e)}}}};return Object(S.jsx)("div",{className:"radar-container",children:Object(S.jsx)($.a,{captions:a,data:t,size:450,options:r})})},n.handleChange=function(e,a){a.score=parseInt(e.target.value);var t=n.state.scores;n.changeIndividualScores(t,a),n.changeAverages(t,a),n.setState({scores:t})},n.changeIndividualScores=function(e,a){e.forEach((function(t,n){t.participant===a.participant&&t.attribute===a.attribute&&t.typology===a.typology&&(e[n].score=a.score)}))},n.changeAverages=function(e){e.forEach((function(a,t){if("average"===a.scoreType){var r=n.averageAttribute(e,a.attribute);e[t].score=r}}))},n.averageAttribute=function(e,a){var t=[];return e.forEach((function(n,r){n.attribute===a&&"individual"===n.scoreType&&t.push(e[r].score)})),t.reduce((function(e,a){return e+a}),0)/t.length},n.renderRowAverage=function(e){return Object(S.jsx)("td",{children:n.averageAttribute(n.state.scores,e.attribute).toFixed(2)})},n.renderDefaultValue=function(e){return n.state.scores.filter((function(a,t){if("individual"===a.scoreType&&a.attribute===e.attribute&&a.participant===e.participant&&a.typology===e.typology)return!0}))[0].score},n.contextRow=function(e){var a=e.attribute;return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:a.name}),n.state.typologies.map((function(t){return n.state.participants.map((function(r){return Object(S.jsx)("td",{children:Object(S.jsx)(H.a,{as:"select",value:n.renderDefaultValue({typology:t,participant:r,attribute:a}),onChange:function(o){return n.handleChange(o,e={typology:t,participant:r,attribute:a})},children:[0,1,2,3,4].map((function(e){return Object(S.jsx)("option",{children:e},"form-option-"+t.name+"-"+r.name+"-"+a.name+"-"+e)}))},"form-control-"+t.name+"-"+r.name+"-"+a.name)},"table-entry-"+t.name+"-"+r.name+"-"+a.name)}))})),n.renderRowAverage({attribute:a})]})},n.allRows=function(){return null!==n.state?n.state.attributes.map((function(e){return n.contextRow({attribute:e,key:"context-row-"+e.name})})):Object(S.jsx)("h1",{children:"Null State"})},n.tableHeader=function(){return null!==n.state?Object(S.jsxs)("thead",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{rowSpan:"2"}),n.state.typologies.map((function(e){return Object(S.jsxs)("th",{colSpan:"2",children:["Typology - ",e.name]},"typology-header"+e.name)})),Object(S.jsx)("th",{rowSpan:"2",children:"Mean Score (0-4)"},"average-header")]}),Object(S.jsx)("tr",{children:n.state.typologies.map((function(e){return n.state.participants.map((function(e){return Object(S.jsx)("th",{children:e.name},"participant-header"+e.name)}))}))},"participant-header-row")]}):Object(S.jsx)("h1",{children:"Null State"})},n.state=P.a.cloneDeep(Y),n.handleChange=n.handleChange.bind(Object(L.a)(n)),n.changeIndividualScores=n.changeIndividualScores.bind(Object(L.a)(n)),n.changeAverages=n.changeAverages.bind(Object(L.a)(n)),n.averageAttribute=n.averageAttribute.bind(Object(L.a)(n)),n.renderRowAverage=n.renderRowAverage.bind(Object(L.a)(n)),n.renderDefaultValue=n.renderDefaultValue.bind(Object(L.a)(n)),n.contextRow=n.contextRow.bind(Object(L.a)(n)),n.allRows=n.allRows.bind(Object(L.a)(n)),n.tableHeader=n.tableHeader.bind(Object(L.a)(n)),n.renderRadarChart=n.renderRadarChart.bind(Object(L.a)(n)),n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){if(void 0!==this.context.contextScores){var e=this.context.contextScores;this.setState(e)}else{var a=this.state;this.context.contextScores=a}}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.contextScores=e,console.log(this.state)}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Context Scoring"}),Object(S.jsx)(E.a,{children:Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[this.tableHeader(),Object(S.jsx)("tbody",{children:this.allRows()})]})}),this.renderRadarChart()]})}}]),t}(r.a.Component));ee.contextType=M;var ae=ee,te=(t(212),JSON.parse(JSON.stringify(B)));te.forEach((function(e,a){[0,1].includes(a)&&(e.score=4),[2,3,4,5].includes(a)&&(e.score=3)}));var ne={farmerAttributes:[{name:"Number",label:"number"},{name:"Name",label:"name"},{name:"Gender",label:"gender"},{name:"Typology",label:"typology"},{name:"Matrix Selections",label:"selections"},{name:"Total",label:"total"}],farmers:[],legumeFunctions:B,blankFarmer:{number:0,name:"Jane Bloggs",gender:"Female",typology:"Medium",selections:te,total:0},typology:U,gender:[{name:"Male",label:"male"},{name:"Female",label:"female"}],summary:{scoreTypes:[],scoresIndividual:[]}};B.forEach((function(e){ne.summary.scoresIndividual.push({legumeFunction:e,scores:[{name:"Total",label:"total",score:0},{name:"Score (0-5)",label:"score",score:0},{name:"Average Rank",label:"rank",score:0}]})})),B.forEach((function(e,a){ne.gender.map((function(e){ne.summary.scoresIndividual[a].scores.push({name:e.name+" (0-5)",label:e.label,type:"gender",score:0})})),ne.typology.map((function(e){ne.summary.scoresIndividual[a].scores.push({name:e.name+" (0-5)",label:e.name,type:"typology",score:0})}))})),ne.summary.scoreTypes=ne.summary.scoresIndividual[0].scores;var re=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).addFarmer=function(){var e=P.a.cloneDeep(n.state.farmers),a=e.length+1,t=P.a.cloneDeep(n.state.blankFarmer);t.number=a,e.push(t),n.setState({farmers:e},(function(){n.updateTotal(),n.updateFarmerSummary()}))},n.farmEntryFields=function(e){return"selections"===e.attribute.label?n.scoringInput(e):"name"===e.attribute.label?n.farmerNameInput(e):n.farmerDetailsSelectInput(e)},n.farmerNameInput=function(e){return Object(S.jsx)("td",{children:Object(S.jsx)(H.a,{value:e.farmer.name,type:"text",onChange:function(a){return n.updateFarmerName(a,e)}})})},n.scoringInput=function(e){return Object(S.jsx)("td",{children:Object(S.jsx)(H.a,{defaultValue:e.legumeFunctions.score,type:"number",onChange:function(a){return n.updateFarmerScore(a,e)}})})},n.farmerDetailsSelectInput=function(e){return Object(S.jsx)("td",{children:Object(S.jsx)(H.a,{as:"select",defaultValue:e.farmer[e.attribute.label],onChange:function(a){return n.updateFarmerDetailesSelect(a,e)},children:n.state[e.attribute.label].map((function(a){return Object(S.jsx)("option",{children:a.name},"form-option-"+e.attribute.label+"-"+e.farmer.number+"-"+a.label)}))})})},n.updateFarmerScore=function(e,a){var t=Object(T.a)(n.state.farmers),r="";t.forEach((function(e,t){e.number===a.farmer.number&&(r=t)}));var o=n.state.legumeFunctions,i="";o.forEach((function(e,t){e.label===a.legumeFunctions.label&&(i=t)}));var l=Object(C.a)({},t[r].selections[i]);l.score=parseInt(e.target.value),t[r].selections[i]=l,n.setState({farmers:t}),n.updateTotal(),n.updateFarmerSummary()},n.updateTotal=function(){var e=n.state.farmers;e.map((function(e){e.total=0,e.selections.map((function(a){e.total+=a.score}))})),n.setState({farmers:e})},n.updateFarmerName=function(e,a){var t=Object(T.a)(n.state.farmers);t.forEach((function(n,r){n.number===a.farmer.number&&(t[r].name=e.target.value)})),n.setState({farmers:t})},n.updateFarmerDetailesSelect=function(e,a){var t=Object(T.a)(n.state.farmers);t.forEach((function(n,r){n.number===a.farmer.number&&(t[r][a.attribute.label]=e.target.value)})),n.setState({farmers:t}),n.updateFarmerSummary()},n.tableHeader=function(){return null!==n.state?Object(S.jsxs)("thead",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{rowSpan:"2",children:"Farmer Number"}),Object(S.jsx)("th",{rowSpan:"2",children:"Farmer Name"}),Object(S.jsx)("th",{rowSpan:"2",children:"Gender"}),Object(S.jsx)("th",{rowSpan:"2",children:"Typology"}),Object(S.jsx)("th",{rowSpan:"1",colSpan:"6",children:"Functions"}),Object(S.jsx)("th",{rowSpan:"2",children:"Total"})]}),Object(S.jsx)("tr",{children:n.state.legumeFunctions.map((function(e){return Object(S.jsx)("th",{children:e.name},"participatory-matrix-head-"+e.label)}))})]}):Object(S.jsx)("h1",{children:"Null State"})},n.tableRows=function(){return null!==n.state?n.state.farmers.map((function(e){return Object(S.jsx)("tr",{children:n.state.farmerAttributes.map((function(a){return"selections"===a.label?e.selections.map((function(t){return n.farmEntryFields(Object(w.a)({key:"participatory-matrix-body-"+e.number+t.label,attribute:a,farmer:e,legumeFunctions:t},"farmer",e))})):"number"===a.label?Object(S.jsx)("td",{children:e.number},"select-input"+e.number+"-"+a.label):"total"===a.label?Object(S.jsx)("td",{children:e.total},"select-input"+e.number+"-"+a.label):n.farmEntryFields({key:"farmEntry-field-"+a.label+"-"+e.number,attribute:a,farmer:e})}))},"participatory-matrix-body-"+e.number)})):Object(S.jsx)("h1",{children:"Null State"})},n.calculateAttributeRank=function(){var e=P.a.cloneDeep(n.state.summary.scoresIndividual);e.forEach((function(e){e.scores[2].score=1})),e.forEach((function(a){e.forEach((function(e){a.scores[1].score>e.scores[1].score&&(a.scores[2].score=a.scores[2].score),a.scores[1].score<e.scores[1].score&&(a.scores[2].score+=1)}))}));for(var a=n.state.legumeFunctions.length,t=[],r=0;r<a;r++)t[r]={number:r+1,occurences:0,conversion:r+1};e.forEach((function(e){t.forEach((function(a){e.scores[2].score==a.number&&(a.occurences+=1,a.conversion=(a.occurences+2*a.number-1)/2)}))})),e.forEach((function(e){t.forEach((function(a){e.scores[2].score==a.number&&(e.scores[2].score=a.conversion)}))})),n.setState((function(a){return Object(C.a)(Object(C.a)({},a),{},{summary:Object(C.a)(Object(C.a)({},a.summary),{},{scoresIndividual:e})})}))},n.updateTypologyScore=function(){var e=P.a.cloneDeep(n.state.summary.scoresIndividual);e.map((function(e){e.scores.map((function(a){"typology"===a.type&&(a.score=n.mapThroughFarmers({variable:"typology",typology:a.label,selection:e.legumeFunction})),"gender"===a.type&&(a.score=n.mapThroughFarmers({variable:"gender",gender:a.label,selection:e.legumeFunction}))}))})),n.setState((function(a){return Object(C.a)(Object(C.a)({},a),{},{summary:Object(C.a)(Object(C.a)({},a.summary),{},{scoresIndividual:e})})}),(function(){n.calculateAttributeRank()}))},n.updateFarmerSummary=function(){var e=P.a.cloneDeep(n.state.summary.scoresIndividual),a=P.a.cloneDeep(n.state.farmers);e.forEach((function(t,n){e[n].scores[0].score=0;var r=P.a.cloneDeep(e[n].scores[0].score);a.forEach((function(o){o.selections.forEach((function(o,i){o.label==t.legumeFunction.label&&(r+=o.score/a.length,e[n].scores[0].score=parseFloat(parseFloat(r).toFixed(2)),e[n].scores[1].score=parseFloat(parseFloat(5*r/20).toFixed(2)))}))}))})),n.setState((function(a){return Object(C.a)(Object(C.a)({},a),{},{summary:Object(C.a)(Object(C.a)({},a.summary),{},{scoresIndividual:e})})}),(function(){n.updateTypologyScore()}))},n.resultsTable=function(){return Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(S.jsxs)("thead",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{rowSpan:"2",children:"Summary Type"}),Object(S.jsx)("th",{rowSpan:"1",colSpan:n.state.legumeFunctions.length,children:"Function"})]}),Object(S.jsx)("tr",{children:n.state.legumeFunctions.map((function(e){return Object(S.jsx)("th",{children:e.name},"participatory-matrix-head-"+e.label)}))})]}),Object(S.jsx)("tbody",{children:n.state.summary.scoreTypes.map((function(e,a){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),n.state.summary.scoresIndividual.map((function(e){return Object(S.jsx)("td",{children:e.scores[a].score})}))]})}))})]})},n.state=P.a.cloneDeep(ne),n.addFarmer=n.addFarmer.bind(Object(L.a)(n)),n.farmEntryFields=n.farmEntryFields.bind(Object(L.a)(n)),n.farmerNameInput=n.farmerNameInput.bind(Object(L.a)(n)),n.scoringInput=n.scoringInput.bind(Object(L.a)(n)),n.farmerDetailsSelectInput=n.farmerDetailsSelectInput.bind(Object(L.a)(n)),n.updateFarmerScore=n.updateFarmerScore.bind(Object(L.a)(n)),n.updateTotal=n.updateTotal.bind(Object(L.a)(n)),n.updateFarmerName=n.updateFarmerName.bind(Object(L.a)(n)),n.updateFarmerDetailesSelect=n.updateFarmerDetailesSelect.bind(Object(L.a)(n)),n.tableHeader=n.tableHeader.bind(Object(L.a)(n)),n.tableRows=n.tableRows.bind(Object(L.a)(n)),n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){if(void 0!==this.context.participatoryMatrixScores){var e=this.context.participatoryMatrixScores;this.setState(e)}else{var a=this.state;this.context.participatoryMatrixScores=a,this.addFarmer()}}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.participatoryMatrixScores=e}},{key:"mapThroughFarmers",value:function(e){var a=P.a.cloneDeep(this.state.farmers),t=0,n=0;return a.map((function(a,r){a.selections.map((function(r,o){"typology"===e.variable&&e.typology.toLowerCase()===a.typology.toLowerCase()&&e.selection.label===r.label&&(n+=1,t+=parseFloat(5*r.score/20)),"gender"===e.variable&&e.gender.toLowerCase()===a.gender.toLowerCase()&&e.selection.label===r.label&&(n+=1,t+=parseFloat(5*r.score/20))}))})),n>0?parseFloat(t/n).toFixed(2):parseFloat(t).toFixed(2)}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Participatory Matrix Scoring"}),Object(S.jsx)("p",{children:'Complete participatory matrix scoring exercise. Each individual has 20 beans which they can distribute across legume functions. Use the "Add Farmer" button to add as many farmers as you need for the exercises. These scores are averaged and automatically transcribed into Legume Option Scores.'}),Object(S.jsxs)(E.a,{children:[Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[this.tableHeader(),Object(S.jsx)("tbody",{children:this.tableRows()})]}),Object(S.jsx)(N.a,{className:"float-right",onClick:this.addFarmer,children:"Add Farmer"})]}),this.resultsTable()]})}}]),t}(r.a.Component);re.contextType=M;for(var oe=re,ie={legumeFunctions:B,male:{pairwiseSelection:[],totals:[]},female:{pairwiseSelection:[],totals:[]},averages:[]},le=[],ce=0;ce<ie.legumeFunctions.length;ce++){var se=ie.legumeFunctions[ce];ie.male.totals.push({attribute:se,value:0}),ie.female.totals.push({attribute:se,value:0}),ie.averages.push({attribute:se,value:0});for(var ue=0;ue<ie.legumeFunctions.length;ue++){var me=ie.legumeFunctions[ue];if(se!==me){var de=[se.label,me.label];de.sort();var be=de.join("_");le.includes(be)||(ie.male.pairwiseSelection.push({funct1:se,funct2:me,identifier:be,value:se}),ie.female.pairwiseSelection.push({funct1:se,funct2:me,identifier:be,value:se}),le.push(be))}}}var fe=ie,pe=(t(213),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).updateSelections=function(e,a){if(""!=e.target.value){var t="";e.target.value===a.funct1.name&&(t=a.funct1),e.target.value===a.funct2.name&&(t=a.funct2);var r=n.state[a.gender].pairwiseSelection;r.forEach((function(e,n){e.funct1===a.funct1&&e.funct2===a.funct2&&(r[n].value=t)}));var o=a.gender;n.setState((function(e){return Object(w.a)({},o,Object(C.a)(Object(C.a)({},e[o]),{},{pairfemalewiseSelection:r}))})),n.upDateTotalScore(o)}else alert("Must not select empty value")},n.upDateTotalScore=function(e){var a=n.state[e].totals;a.forEach((function(t,r){a[r].value=0,n.state[e].pairwiseSelection.forEach((function(e){e.value===t.attribute&&a[r].value++}))})),n.setState((function(t){return Object(w.a)({},e,Object(C.a)(Object(C.a)({},t[e]),{},{totals:a}))})),n.updateAverage()},n.updateAverage=function(){var e=n.state.male.totals,a=n.state.female.totals,t=n.state.averages;t.map((function(r,o){var i=(e[o].value+a[o].value)/2;t[o].value=i,n.setState({averages:t})}))},n.pairWiseTable=function(e){e.gender;return Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Pair"}),Object(S.jsx)("th",{children:"Selection Female"}),Object(S.jsx)("th",{children:"Selection Male"})]})}),Object(S.jsx)("tbody",{children:n.state[e.gender].pairwiseSelection.map((function(e,a){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.funct1.name+" vs "+e.funct2.name},"pairwise-ranking-table-item-name"+e.funct1.name+"-"+e.funct2.name),Object(S.jsx)("td",{children:Object(S.jsxs)(H.a,{value:n.state.female.pairwiseSelection[a].value.name,as:"select",onChange:function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{funct1:e.funct1,funct2:e.funct2,gender:"female"};return n.updateSelections(a,t)},children:[Object(S.jsx)("option",{children:e.funct1.name}),Object(S.jsx)("option",{children:e.funct2.name})]},"pairwise-ranking-table-form"+e.funct1.name+"-"+e.funct2.name+"-female")},"pairwise-ranking-table-item-form"+e.funct1.name+"-"+e.funct2.name+"-female"),Object(S.jsx)("td",{children:Object(S.jsxs)(H.a,{as:"select",value:n.state.male.pairwiseSelection[a].value.name,onChange:function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{funct1:e.funct1,funct2:e.funct2,gender:"male"};return n.updateSelections(a,t)},children:[Object(S.jsx)("option",{children:e.funct1.name}),Object(S.jsx)("option",{children:e.funct2.name})]},"pairwise-ranking-table-form"+e.funct1.name+"-"+e.funct2.name+"-male")},"pairwise-ranking-table-item-form"+e.funct1.name+"-"+e.funct2.name+"-male")]},"pairwise-ranking-table-row"+e.funct1.name+e.funct2.name)}))})]})},n.pairWiseResultsTable=function(e){return Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,className:"table-style",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Attribute"}),Object(S.jsx)("th",{children:"Count Female"}),Object(S.jsx)("th",{children:"Count Male"}),Object(S.jsx)("th",{children:"Average Count"})]})}),Object(S.jsx)("tbody",{children:n.state.legumeFunctions.map((function(e,a){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name},"pairwise-results-table-row-item-"+e.name),Object(S.jsx)("td",{children:n.state.female.totals[a].value},"pairwise-results-table-row-item-female-"+e.name),Object(S.jsx)("td",{children:n.state.male.totals[a].value},"pairwise-results-table-row-item-male-"+e.name),Object(S.jsx)("td",{children:n.state.averages[a].value},"pairwise-results-table-row-item-average-"+e.name)]},"pairwise-results-table-row-"+e.name)}))})]})},n.state=fe,n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){if(void 0!==this.context.pairWiseScores){var e=this.context.pairWiseScores;this.setState(e)}else{var a=this.state;this.context.pairWiseScores=a}this.upDateTotalScore("male"),this.upDateTotalScore("female")}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.pairWiseScores=e,console.log(this.state)}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Pairwise Component Ranking"}),Object(S.jsx)("p",{children:"Select the most important attribute out of the following pairs"}),Object(S.jsxs)("div",{className:"table-container",children:[Object(S.jsx)(E.a,{className:"table-container",children:this.pairWiseTable({gender:"female"})}),this.pairWiseResultsTable({gender:"female",className:"results-table-pairwise"})]}),Object(S.jsx)("div",{className:"table-container"})]})}}]),t}(n.Component));pe.contextType=M;var he=pe,je=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).renderComponents=function(){},n.state={components:[Object(S.jsx)(ae,{},"contextScore"),Object(S.jsx)(he,{},"pairwise"),Object(S.jsx)(oe,{},"matrix"),Object(S.jsx)(Z,{},"agroeco")]},n}return Object(c.a)(t,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Data Entry"}),Object(S.jsxs)("div",{className:"data-entry-container",children:[this.state.components.map((function(e){return e})),";"]})]})}}]),t}(r.a.Component),xe=t(34),ge=(t(214),t(226)),ve=t(227),Oe=t(228),ye=t(229),Fe={lat:51.4,lng:0},Se=[];function ke(e){var a=Object(n.useRef)(null),t=Object(n.useMemo)((function(){return{dragend:function(){var t=a.current;if(null!=t){var n=P.a.clone(e.center),r=t.getLatLng().lat,o=t.getLatLng().lng;n[e.index].lat=r,n[e.index].lng=o,e.changeMarkerPositions(n)}}}}),[]);return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(ge.a,{draggable:!0,eventHandlers:t,position:e.center[e.index],ref:a})})}function we(e){return Object(S.jsx)(ve.a,{pathOptions:{color:"purple"},positions:e.positions})}void 0===M.location&&(Se=[{lat:Fe.lat+.01,lng:Fe.lng-.01},{lat:Fe.lat+.01,lng:Fe.lng+.01},{lat:Fe.lat-.01,lng:Fe.lng+.01},{lat:Fe.lat-.01,lng:Fe.lng-.01}]),void 0!==M.location&&(Se=M.location);var Ce=function(){var e=Object(n.useState)(Se),a=Object(xe.a)(e,2),t=a[0],r=a[1],o=Object(n.useState)(Fe),i=Object(xe.a)(o,2),l=i[0],c=(i[1],Object(n.useContext)(M));return Object(n.useEffect)((function(){c.location=t})),Object(S.jsx)("div",{className:"leaflet-container",children:Object(S.jsxs)(Oe.a,{center:l,zoom:13,scrollWheelZoom:!1,children:[Object(S.jsx)(ye.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(S.jsx)(we,{positions:t}),Object(S.jsx)(ke,{center:t,index:0,changeMarkerPositions:r}),Object(S.jsx)(ke,{center:t,index:1,changeMarkerPositions:r}),Object(S.jsx)(ke,{center:t,index:2,changeMarkerPositions:r}),Object(S.jsx)(ke,{center:t,index:3,changeMarkerPositions:r})]})})},Te=(t(215),[]),Le=P.a.cloneDeep(B);Le.forEach((function(e){Te.push({legumeFunction:e,score:0})}));var Ee=[],Ne=P.a.cloneDeep(K);Ne.forEach((function(e){Ee.push({attribute:e,score:0})}));var Ae={functionFit:[],contextFit:[],agroEcoFit:[],overallFit:[]};Ne.map((function(e){Ae.contextFit.push({attribute:e,score:0})})),Ae.contextFit.push({overallFit:0}),Ae.contextFit.push({overallRank:1}),Le.map((function(e){Ae.functionFit.push({legumeFunction:e,score:0})})),Ae.functionFit.push({overallFit:0}),Ae.functionFit.push({overallRank:1});var Me=P.a.cloneDeep(z);Me.map((function(e){Ae.agroEcoFit.push({agroEcoFilter:e,score:0})})),Ae.agroEcoFit.push({overallFit:0}),Ae.agroEcoFit.push({overallRank:1}),Ae.overallFit.push({overallFit:0}),Ae.overallFit.push({overallRank:1});var De=P.a.cloneDeep(z),Ie=[];De.map((function(e){Ie.push({name:e.name,label:e.label})}));var Re={legumeFunctions:Le,attributes:K,agroEcoFilters:Ie,agroEcoFitSummary:Me,functionFitSummary:Te,contextFitSummary:Ee,emptyScoresForLegume:Ae,legumes:[],resultsFilter:{selectOptions:["Summary","AgroEco Scores","Context Scores","Function Scores"],orderOptions:["Overall Score","AgroEco Score","Context Score","Function Score"],numberOfLegumesOptions:["5","10","20","All"],selection:{whichResults:"Summary",order:"Overall Score",numberOfLegumes:"5"}},formFilled:!1},He=t(92),Ge=t(101),Pe=[{name:"Pigeon pea (Cajanus cajan)",type:"Grain legume perennial",food:4,feed:2,income:3,"erosion-control":3,fuel:2,"soil-fertility":3,land:1,labour:2,seed:1,"inp-serv":1,"knowl-skill":2,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:530,max:4030}],temp:[{min:16,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:4.5,max:8}]},{name:"Climbing beans (Phaseolus vulgaris), local types available in W Ethiopia, harvested several (4-5) years before reseeding)",type:"Grain legume perennial",food:4,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:1,labour:1,seed:1,"inp-serv":2,"knowl-skill":2,water:3,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:3e3}],temp:[{min:6,max:29}],alt:[{min:500,max:2e3}],soilpH:[{min:5,max:7}]},{name:"Climbing beans (Phaseolus vulgaris) annual type",type:"Grain legume seasonal",food:4,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:1,labour:3,seed:2,"inp-serv":3,"knowl-skill":3,water:3,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:3e3}],temp:[{min:6,max:29}],alt:[{min:500,max:2e3}],soilpH:[{min:5,max:7}]},{name:"Bush bean (Phaseolus vulgaris)",type:"Grain legume seasonal",food:4,feed:1,income:4,"erosion-control":1,fuel:1,"soil-fertility":1,land:2,labour:3,seed:1,"inp-serv":2,"knowl-skill":3,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:3e3}],temp:[{min:6,max:29}],alt:[{min:500,max:2e3}],soilpH:[{min:5,max:7}]},{name:"Groundnuts (Arachis hypogaea L.)",type:"Grain legume seasonal",food:3,feed:2,income:4,"erosion-control":2,fuel:1,"soil-fertility":3,land:4,labour:4,seed:1,"inp-serv":3,"knowl-skill":3,water:2,markets:1,"agroecology-source":"Lexsys",rainfall:[{min:310,max:3e3}],temp:[{min:10,max:45}],alt:[{min:0,max:1600}],soilpH:[{min:4,max:8}]},{name:"Soybean grain type (Glycine max L.)",type:"Grain legume seasonal",food:3,feed:2,income:4,"erosion-control":2,fuel:1,"soil-fertility":2,land:3,labour:3,seed:2,"inp-serv":3,"knowl-skill":3,water:2,markets:4,"agroecology-source":"Lexsys",rainfall:[{min:700,max:2e3}],temp:[{min:10,max:30}],alt:[{min:0,max:1400}],soilpH:[{min:5,max:7}]},{name:"Soybean/dual purpose grain plus fodder (Glycine max L.)",type:"Grain legume seasonal",food:2,feed:2,income:4,"erosion-control":3,fuel:1,"soil-fertility":4,land:3,labour:3,seed:2,"inp-serv":3,"knowl-skill":3,water:2,markets:4,"agroecology-source":"Lexsys",rainfall:[{min:700,max:2e3}],temp:[{min:10,max:30}],alt:[{min:0,max:1400}],soilpH:[{min:5,max:7}]},{name:"Faba bean (Vicia faba L.) ",type:"Grain legume seasonal",food:4,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:300,max:2090}],temp:[{min:6,max:28}],alt:[{min:1800,max:3200}],soilpH:[{min:4.5,max:8.3}]},{name:"Cowpea \u2013 grain type (Vigna unguiculata)",type:"Grain legume seasonal",food:4,feed:1,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:2,labour:3,seed:2,"inp-serv":3,"knowl-skill":2,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:400,max:2e3}],temp:[{min:13,max:28}],alt:[{min:0,max:1500}],soilpH:[{min:4.3,max:7.9}]},{name:"Cowpea \u2013 forage type (Vigna unguiculata)",type:"Grain legume seasonal",food:2,feed:4,income:2,"erosion-control":2,fuel:0,"soil-fertility":2,land:2,labour:3,seed:3,"inp-serv":3,"knowl-skill":2,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:400,max:2e3}],temp:[{min:13,max:28}],alt:[{min:0,max:1500}],soilpH:[{min:4.3,max:7.9}]},{name:"Bambara nut (Voandzou subterraneous)",type:"Grain legume seasonal",food:4,feed:0,income:0,"erosion-control":1,fuel:0,"soil-fertility":2,land:1,labour:1,seed:1,"inp-serv":2,"knowl-skill":1,water:1,markets:2,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Chickpea (Cicer arietinum L.) \u2013 desi type (for food)- following the main crop",type:"Grain legume seasonal",food:4,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:2,labour:3,seed:1,"inp-serv":3,"knowl-skill":2,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:1500}],temp:[{min:7,max:28}],alt:[{min:1170,max:1900}],soilpH:[{min:5,max:8.3}]},{name:"Chickpea (Cicer arietinum L.) \u2013 kabuli type (for export)-main crop",type:"Grain legume seasonal",food:3,feed:2,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:3,labour:3,seed:3,"inp-serv":3,"knowl-skill":3,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:600,max:1500}],temp:[{min:7,max:28}],alt:[{min:1170,max:1900}],soilpH:[{min:5,max:8.3}]},{name:"Green grams/Mung bean (Vigna radiata)",type:"Grain legume seasonal",food:4,feed:1,income:4,"erosion-control":1,fuel:0,"soil-fertility":1,land:2,labour:3,seed:1,"inp-serv":2,"knowl-skill":1,water:2,markets:3,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Lentils (Lens culinaris Medik.)",type:"Grain legume seasonal",food:4,feed:3,income:4,"erosion-control":1,fuel:0,"soil-fertility":2,land:2,labour:3,seed:2,"inp-serv":2,"knowl-skill":2,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:280,max:2430}],temp:[{min:6,max:27}],alt:[{min:1e3,max:3800}],soilpH:[{min:4.5,max:8.2}]},{name:"Lupins \u2013 Sweet lupin (new), traditional (Et)",type:"Grain legume seasonal",food:2,feed:1,income:3,"erosion-control":2,fuel:1,"soil-fertility":4,land:1,labour:1,seed:2,"inp-serv":0,"knowl-skill":1,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:350,max:1660}],temp:[{min:6,max:26}],alt:[{min:1600,max:3e3}],soilpH:[{min:5,max:7}]},{name:"Field Pea (Pisum sativum L), adapted to high rainfall environment",type:"Grain legume seasonal",food:4,feed:3,income:4,"erosion-control":2,fuel:0,"soil-fertility":2,land:3,labour:2,seed:2,"inp-serv":1,"knowl-skill":2,water:3,markets:1,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Field pea (Pisum absynicum var. sativum)-adapted to low rainfall environment",type:"Grain legume seasonal",food:4,feed:3,income:3,"erosion-control":2,fuel:1,"soil-fertility":2,land:2,labour:2,seed:3,"inp-serv":1,"knowl-skill":2,water:1,markets:2,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Grass pea \u2013 (Lathyrus spp)",type:"Grain legume seasonal",food:3,feed:1,income:3,"erosion-control":1,fuel:0,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":1,"knowl-skill":1,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:320,max:1360}],temp:[{min:5,max:27}],alt:[{min:800,max:3e3}],soilpH:[{min:4.5,max:8.3}]},{name:"Cluster bean (Cyamopsis tetragonoloba L.)",type:"Grain legume seasonal",food:3,feed:1,income:3,"erosion-control":1,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:380,max:2410}],temp:[{min:12,max:35}],alt:[{min:0,max:1e3}],soilpH:[{min:5.3,max:8.3}]},{name:"Dolichos lablab (Lablab purpureus)- for grain",type:"Grain legume seasonal",food:4,feed:4,income:3,"erosion-control":2,fuel:1,"soil-fertility":3,land:2,labour:3,seed:2,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:600,max:2500}],temp:[{min:15,max:35}],alt:[{min:0,max:2100}],soilpH:[{min:4.5,max:7.8}]},{name:"French beans (Phaseolus vulgaris)",type:"Grain legume seasonal",food:4,feed:0,income:4,"erosion-control":1,fuel:0,"soil-fertility":1,land:2,labour:3,seed:4,"inp-serv":4,"knowl-skill":3,water:4,markets:4,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Desmodium silverleaf (Desmodium uncinatum)",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:2,"erosion-control":3,fuel:0,"soil-fertility":3,land:3,labour:1,seed:3,"inp-serv":1,"knowl-skill":2,water:2,markets:3,"agroecology-source":"SoFT",rainfall:[{min:750,max:2400}],temp:[{min:3,max:35}],alt:[{min:0,max:2500}],soilpH:[{min:6.5,max:7.5}]},{name:"Clover (Trifolium)",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:1,"erosion-control":2,fuel:0,"soil-fertility":2,land:1,labour:3,seed:3,"inp-serv":2,"knowl-skill":3,water:3,markets:0,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Alfalfa/lucerne (Medicago sativa)",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:3,income:2,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:500,max:2700}],temp:[{min:4,max:27}],alt:[{min:300,max:3e3}],soilpH:[{min:5.5,max:8.8}]},{name:"Stylosanthes guianensis - semi-erect -forage type",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:500,max:2e3}],temp:[{min:15,max:27}],alt:[{min:0,max:2e3}],soilpH:[{min:4,max:7.7}]},{name:"Stylosanthes hamata - bush/branching type-forage type",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:600,max:1700}],temp:[{min:22,max:30}],alt:[{min:0,max:500}],soilpH:[{min:4,max:6}]},{name:"Stylosanthes scabra -erect - forage type",type:"Herbaceous legumes - Perennial/regrowth (ability regrowth after seasonal harvesting)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":3,"knowl-skill":2,water:2,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:500,max:1700}],temp:[{min:20,max:30}],alt:[{min:0,max:600}],soilpH:[{min:4,max:7}]},{name:"Hairy Vetch (Vicia villosa )",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":2,"knowl-skill":3,water:3,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:310,max:1660}],temp:[{min:4,max:21}],alt:[{min:1800,max:3e3}],soilpH:[{min:4.9,max:8.2}]},{name:"Vicia dasycarpa",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:0,feed:4,income:0,"erosion-control":3,fuel:0,"soil-fertility":3,land:2,labour:3,seed:4,"inp-serv":2,"knowl-skill":3,water:3,markets:2,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Velvet bean (Mucuna pruriens) ",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:0,feed:1,income:0,"erosion-control":3,fuel:0,"soil-fertility":4,land:3,labour:2,seed:3,"inp-serv":2,"knowl-skill":2,water:1,markets:4,"agroecology-source":"Lexsys",rainfall:[{min:650,max:3e3}],temp:[{min:15,max:35}],alt:[{min:0,max:2100}],soilpH:[{min:4.5,max:7.7}]},{name:"Lablab- forage type (Lablab purpureus)",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:3,feed:4,income:3,"erosion-control":2,fuel:1,"soil-fertility":3,land:2,labour:3,seed:2,"inp-serv":2,"knowl-skill":2,water:2,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:600,max:2500}],temp:[{min:15,max:35}],alt:[{min:0,max:2100}],soilpH:[{min:4.5,max:7.8}]},{name:"Crotolaria juncea",type:"Herbaceous legumes - Seasonal/no-regrowth (harvest after one season, then need reseeding)",food:0,feed:1,income:0,"erosion-control":3,fuel:0,"soil-fertility":4,land:2,labour:3,seed:2,"inp-serv":2,"knowl-skill":2,water:2,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:490,max:4290}],temp:[{min:8,max:35}],alt:[{min:0,max:2500}],soilpH:[{min:4.5,max:7.5}]},{name:"Calliandra calothyrus",type:"Tree legumes - coppicing",food:0,feed:4,income:2,"erosion-control":4,fuel:3,"soil-fertility":3,land:1,labour:1,seed:3,"inp-serv":1,"knowl-skill":2,water:2,markets:3,"agroecology-source":"SoFT",rainfall:[{min:1200,max:4290}],temp:[{min:10,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:4.5,max:7.5}]},{name:"Gliricidia sepium",type:"Tree legumes - coppicing",food:0,feed:3,income:1,"erosion-control":4,fuel:4,"soil-fertility":4,land:2,labour:2,seed:3,"inp-serv":1,"knowl-skill":1,water:1,markets:4,"agroecology-source":"SoFT",rainfall:[{min:800,max:4e3}],temp:[{min:15,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:4.3,max:8}]},{name:"Leucaena leucocephala",type:"Tree legumes - coppicing",food:0,feed:4,income:0,"erosion-control":4,fuel:4,"soil-fertility":4,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:500,max:4100}],temp:[{min:15,max:35}],alt:[{min:0,max:1350}],soilpH:[{min:4.6,max:8.7}]},{name:"Leucaena trichandra",type:"Tree legumes - coppicing",food:0,feed:4,income:2,"erosion-control":3,fuel:4,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:900,max:3500}],temp:[{min:10,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:5,max:8.7}]},{name:"Leucaena diversifolia",type:"Tree legumes - coppicing",food:0,feed:4,income:2,"erosion-control":3,fuel:4,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:500,max:4e3}],temp:[{min:3,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:5,max:8.7}]},{name:"Tree lucerne (Chamaecytisus palmensis)",type:"Tree legumes \u2013 coppicing",food:0,feed:4,income:2,"erosion-control":3,fuel:4,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:300,max:1600}],temp:[{min:3,max:28}],alt:[{min:1e3,max:2500}],soilpH:[{min:5,max:8.7}]},{name:"Sesbania sesban",type:"Tree legumes \u2013 non coppicing",food:0,feed:4,income:2,"erosion-control":4,fuel:3,"soil-fertility":3,land:1,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:2,markets:3,"agroecology-source":"Lexsys",rainfall:[{min:500,max:2500}],temp:[{min:15,max:30}],alt:[{min:0,max:2300}],soilpH:[{min:5,max:7.5}]},{name:"Sesbania grandiflora",type:"Tree legumes \u2013 non coppicing",food:0,feed:3,income:2,"erosion-control":3,fuel:3,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:700,max:3e3}],temp:[{min:22,max:35}],alt:[{min:0,max:1e3}],soilpH:[{min:4.5,max:8.7}]},{name:"Tephrosia (Tephrosia vogelii)",type:"Tree legumes \u2013 non coppicing",food:0,feed:0,income:2,"erosion-control":3,fuel:4,"soil-fertility":4,land:2,labour:3,seed:2,"inp-serv":1,"knowl-skill":1,water:1,markets:2,"agroecology-source":"Lexsys",rainfall:[{min:870,max:2670}],temp:[{min:13,max:29}],alt:[{min:0,max:2100}],soilpH:[{min:4.5,max:6.5}]},{name:"Faidherbia albidia",type:"Tree legumes \u2013 non coppicing",food:0,feed:3,income:2,"erosion-control":3,fuel:3,"soil-fertility":4,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":null,rainfall:[{min:null,max:null}],temp:[{min:null,max:null}],alt:[{min:null,max:null}],soilpH:[{min:null,max:null}]},{name:"Acacia angustissima",type:"Tree legumes \u2013 non coppicing",food:0,feed:2,income:3,"erosion-control":3,fuel:4,"soil-fertility":3,land:2,labour:2,seed:1,"inp-serv":2,"knowl-skill":2,water:1,markets:3,"agroecology-source":"SoFT",rainfall:[{min:800,max:3e3}],temp:[{min:10,max:35}],alt:[{min:0,max:2e3}],soilpH:[{min:5,max:8.7}]}],Be=[],Ue=[];Pe.map((function(e){Be.includes(e.type)||Be.push(e.type),Ue.includes(e["agroecology-source"])||null===e["agroecology-source"]||Ue.push(e["agroecology-source"])}));var Ve={allLegumes:Pe,legumeTypes:Be,sources:Ue},Ke=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).initialiseResults=function(){var e=P.a.cloneDeep(Ve.allLegumes);e.map((function(e){e.results=P.a.cloneDeep(n.state.emptyScoresForLegume)}));var a=P.a.cloneDeep(n.context.agroEcoData),t=P.a.cloneDeep(n.context.contextScores.scores),r=P.a.cloneDeep(n.state.contextFitSummary);r.map((function(e){t.map((function(a){"average"===a.scoreType&&e.attribute.label===a.attribute.label&&(e.score=4-a.score)}))}));var o=P.a.cloneDeep(n.context.pairWiseScores.averages),i=P.a.cloneDeep(n.context.participatoryMatrixScores.summary.scoresIndividual),l=P.a.cloneDeep(n.state.functionFitSummary);l.map((function(e){o.map((function(a){a.attribute.label===e.legumeFunction.label&&(e.pairwisescore=a.value)}))})),l.map((function(e){i.map((function(a){a.legumeFunction.label===e.legumeFunction.label&&(e.matrixscore=a.scores[1].score)}))})),l.map((function(e){e.score=parseFloat((e.pairwisescore/2+e.matrixscore/2).toFixed(2))})),n.setState({legumes:e,agroEcoFitSummary:a.biofilters,contextFitSummary:r,functionFitSummary:l},(function(){n.calculateLegumeScores()}))},n.legumeContextScores=function(e){var a=parseFloat(e.legumecontext),t=parseFloat(e.formcontext);if(a-t>-.5&&a-t<=0){var n=4+(a-t)/2;if(n>0)return n}if(a-t<.5&&a-t>=0){var r=4-(a-t)/2;if(r>0)return r}if(a>t){var o=4-2*(a-t);if(o>0)return o}return t>a?4:0},n.legumeFunctionScores=function(e){var a=e.formfunction,t=e.legumefunction;return 0===a?0:t<a?t*a/8:t*a/4},n.legumeAgroEcoScores=function(e){var a=e.legumeMin,t=e.legumeMax,n=e.formvalue;return n>=a&&n<=t?1:0},n.calculateLegumeScores=function(){var e=P.a.cloneDeep(n.state.legumes);e.map((function(e){e.results.contextFit.map((function(a){n.state.contextFitSummary.map((function(t){void 0!==a.attribute&&t.attribute.label===a.attribute.label&&(a.score=n.legumeContextScores({legumecontext:e[t.attribute.label],formcontext:t.score}))}))})),e.results.functionFit.map((function(a){n.state.functionFitSummary.map((function(t){void 0!==t.legumeFunction&&void 0!==a.legumeFunction&&t.legumeFunction.label===a.legumeFunction.label&&(a.score=n.legumeFunctionScores({formfunction:t.score,legumefunction:e[t.legumeFunction.label]}))}))})),e.results.agroEcoFit.map((function(a){n.state.agroEcoFitSummary.map((function(t){void 0!==a.agroEcoFilter&&a.agroEcoFilter.label===t.label&&(a.score=n.legumeAgroEcoScores({legumeMin:e[t.label][0].min,legumeMax:e[t.label][0].max,formvalue:t.value}))}))}))})),e.map((function(e){var a=0;e.results.agroEcoFit.forEach((function(e){void 0!==e.agroEcoFilter&&(a+=e.score)})),e.results.agroEcoFit.forEach((function(e){void 0!==e.overallFit&&(e.overallFit=a)}));var t=0;e.results.contextFit.forEach((function(e){void 0!==e.attribute&&(t+=e.score)})),e.results.contextFit.forEach((function(e){void 0!==e.overallFit&&(e.overallFit=t)}));var r=0;e.results.functionFit.forEach((function(e){void 0!==e.legumeFunction&&(r+=e.score)})),e.results.functionFit.forEach((function(e){void 0!==e.overallFit&&(e.overallFit=r)})),e.results.overallFit.map((function(e){void 0!==e.overallFit&&(e.overallFit=(a/n.state.agroEcoFilters.length+t/(4*n.state.attributes.length)+r/(4*n.state.legumeFunctions.length))/3)}))})),e.forEach((function(a){a.results.agroEcoFit[5].overallRank=1;var t=[];e.forEach((function(e){a.results.agroEcoFit[4].overallFit<e.results.agroEcoFit[4].overallFit&&!t.includes(e.results.agroEcoFit[4].overallFit)&&(t.push(e.results.agroEcoFit[4].overallFit),a.results.agroEcoFit[5].overallRank+=1),a.results.contextFit[7].overallFit<e.results.contextFit[7].overallFit&&!t.includes(e.results.contextFit[7].overallFit)&&(t.push(e.results.contextFit[7].overallFit),a.results.contextFit[8].overallRank+=1),a.results.functionFit[6].overallFit<e.results.functionFit[6].overallFit&&!t.includes(e.results.functionFit[6].overallFit)&&(t.push(e.results.functionFit[6].overallFit),a.results.functionFit[7].overallRank+=1),a.results.overallFit[0].overallFit<e.results.overallFit[0].overallFit&&!t.includes(e.results.overallFit[0].overallFit)&&(t.push(e.results.overallFit[0].overallFit),a.results.overallFit[1].overallRank+=1)}))})),n.setState({legumes:e})},n.checkFormFilled=function(){void 0!==n.context.agroEcoData&&void 0!==n.context.contextScores&&void 0!==n.context.pairWiseScores&&void 0!==n.context.participatoryMatrixScores&&n.setState({formFilled:!0},(function(){n.initialiseResults()}))},n.returnResultsForSummaryTable=function(e){return void 0!==e.item.score?Object(S.jsx)("td",{children:parseFloat(e.item.score).toFixed(2)}):void 0!==e.item.overallFit?Object(S.jsx)("td",{children:parseFloat(e.item.overallFit).toFixed(2)}):void 0!==e.item.overallRank?Object(S.jsx)("td",{children:parseInt(e.item.overallRank)}):void 0},n.agroEcoTable=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"AgroEco Fit"}),Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Legume Name"}),n.state.agroEcoFilters.map((function(e){return Object(S.jsx)("th",{children:e.label})})),Object(S.jsx)("th",{children:"total score"}),Object(S.jsx)("th",{children:"overall rank"})]})}),Object(S.jsx)("tbody",{children:n.orderAndFilterLegume().map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),e.results.agroEcoFit.map((function(e){return n.returnResultsForSummaryTable({item:e})}))]})}))})]})]})},n.contextFitTable=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Context Fit"}),Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Legume Name"}),n.state.attributes.map((function(e){return Object(S.jsx)("th",{children:e.label})})),Object(S.jsx)("th",{children:"total score"}),Object(S.jsx)("th",{children:"overall rank"})]})}),Object(S.jsx)("tbody",{children:n.orderAndFilterLegume().map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),e.results.contextFit.map((function(e){return n.returnResultsForSummaryTable({item:e})}))]})}))})]})]})},n.functionFitTable=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Function Fit"}),Object(S.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Legume Name"}),n.state.legumeFunctions.map((function(e){return Object(S.jsx)("th",{children:e.label})})),Object(S.jsx)("th",{children:"total score"}),Object(S.jsx)("th",{children:"overall rank"})]})}),Object(S.jsx)("tbody",{children:n.orderAndFilterLegume().map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),e.results.functionFit.map((function(e){return n.returnResultsForSummaryTable({item:e})}))]})}))})]})]})},n.returnRank=function(e){var a=0;return e.arr.map((function(e){void 0!==e.overallRank&&(a=e.overallRank)})),a},n.returnScore=function(e){var a=0;return e.arr.map((function(e){void 0!==e.overallFit&&(a=e.overallFit)})),parseFloat(a).toFixed(2)},n.compareScores=function(e,a,t){var n="";e.results[t.scoreType].map((function(e){void 0!==e.overallFit&&(n=e.overallFit)}));var r="";return a.results[t.scoreType].map((function(e){void 0!==e.overallFit&&(r=e.overallFit)})),n<r?1:n>r?-1:0},n.orderAndFilterLegume=function(){var e=n.state.resultsFilter.selection.order,a=P.a.cloneDeep(n.state.legumes);return"Overall Score"===e&&(a.sort((function(e,a){return n.compareScores(e,a,{scoreType:"overallFit"})})),console.log(a)),"AgroEco Score"===e&&(a.sort((function(e,a){return n.compareScores(e,a,{scoreType:"agroEcoFit"})})),console.log(a)),"Context Score"===e&&(a.sort((function(e,a){return n.compareScores(e,a,{scoreType:"contextFit"})})),console.log(a)),"Function Score"===e&&(a.sort((function(e,a){return n.compareScores(e,a,{scoreType:"functionFit"})})),console.log(a)),"5"==n.state.resultsFilter.selection.numberOfLegumes&&(a=a.slice(0,5)),"10"==n.state.resultsFilter.selection.numberOfLegumes&&(a=a.slice(0,10)),"20"==n.state.resultsFilter.selection.numberOfLegumes&&(a=a.slice(0,20)),a},n.changeCellColour=function(){return"blue"},n.summaryTable=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Summary"}),Object(S.jsxs)(R.a,{bordered:!0,striped:!0,hover:!0,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Legume Name"}),Object(S.jsx)("th",{children:"Agro-Eco score"}),Object(S.jsx)("th",{children:"Agro-Eco rank"}),Object(S.jsx)("th",{children:"Context score"}),Object(S.jsx)("th",{children:"Context rank"}),Object(S.jsx)("th",{children:"Function score"}),Object(S.jsx)("th",{children:"Function rank"}),Object(S.jsx)("th",{children:"Overall score (0-1)"}),Object(S.jsx)("th",{children:"Overall rank"})]})}),Object(S.jsx)("tbody",{children:n.orderAndFilterLegume().map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),Object(S.jsx)("td",{children:n.returnScore({arr:e.results.agroEcoFit})}),Object(S.jsx)("td",{children:n.returnRank({arr:e.results.agroEcoFit})}),Object(S.jsx)("td",{children:n.returnScore({arr:e.results.contextFit})}),Object(S.jsx)("td",{children:n.returnRank({arr:e.results.contextFit})}),Object(S.jsx)("td",{children:n.returnScore({arr:e.results.functionFit})}),Object(S.jsx)("td",{children:n.returnRank({arr:e.results.functionFit})}),Object(S.jsx)("td",{children:n.returnScore({arr:e.results.overallFit})}),Object(S.jsx)("td",{children:n.returnRank({arr:e.results.overallFit})})]})}))})]})]})},n.renderLegumeResults=function(){return"Summary"===n.state.resultsFilter.selection.whichResults?n.summaryTable():"AgroEco Scores"===n.state.resultsFilter.selection.whichResults?n.agroEcoTable():"Context Scores"===n.state.resultsFilter.selection.whichResults?n.contextFitTable():"Function Scores"===n.state.resultsFilter.selection.whichResults?n.functionFitTable():void 0},n.changeSelection=function(e,a){n.setState((function(t){return Object(C.a)(Object(C.a)({},t),{},{resultsFilter:Object(C.a)(Object(C.a)({},t.resultsFilter),{},{selection:Object(C.a)(Object(C.a)({},t.resultsFilter.selection),{},Object(w.a)({},a.type,e.target.value))})})}),(function(){return n.orderAndFilterLegume()}))},n.resultsFilters=function(){return Object(S.jsx)("div",{className:"results-form",children:Object(S.jsxs)(E.a,{className:"results-form",children:[Object(S.jsxs)(He.a,{controlId:"resultsSelect",className:"form-item",children:[Object(S.jsx)(Ge.a,{children:"Results"}),Object(S.jsx)(H.a,{value:n.state.resultsFilter.selection.whichResults,onChange:function(e){return n.changeSelection(e,{type:"whichResults"})},as:"select",children:n.state.resultsFilter.selectOptions.map((function(e){return Object(S.jsx)("option",{children:e})}))})]}),Object(S.jsxs)(He.a,{value:n.state.resultsFilter.selection.order,onChange:function(e){return n.changeSelection(e,{type:"order"})},controlId:"resultsFilter",className:"form-item",children:[Object(S.jsx)(Ge.a,{children:"Order by:"}),Object(S.jsx)(H.a,{as:"select",value:n.state.resultsFilter.selection.order,onChange:function(e){return n.changeSelection(e,{type:"order"})},children:n.state.resultsFilter.orderOptions.map((function(e){return Object(S.jsx)("option",{children:e})}))})]}),Object(S.jsxs)(He.a,{controlId:"resultsFilter",className:"form-item",children:[Object(S.jsx)(Ge.a,{children:"Number of Legumes Displayed"}),Object(S.jsx)(H.a,{as:"select",value:n.state.resultsFilter.selection.numberOfLegumes,onChange:function(e){return n.changeSelection(e,{type:"numberOfLegumes"})},children:n.state.resultsFilter.numberOfLegumesOptions.map((function(e){return Object(S.jsx)("option",{children:e})}))})]})]})})},n.renderBody=function(){return!1===n.state.formFilled?Object(S.jsx)("h1",{children:"No data entered yet. Please fill in data-entry form"}):!0===n.state.formFilled?Object(S.jsxs)("div",{children:[n.resultsFilters(),Object(S.jsx)("div",{children:n.renderLegumeResults()})]}):void 0},n.state=Re,n.initialiseResults=n.initialiseResults.bind(Object(L.a)(n)),n.legumeContextScores=n.legumeContextScores.bind(Object(L.a)(n)),n.legumeFunctionScores=n.legumeFunctionScores.bind(Object(L.a)(n)),n.legumeAgroEcoScores=n.legumeAgroEcoScores.bind(Object(L.a)(n)),n.calculateLegumeScores=n.calculateLegumeScores.bind(Object(L.a)(n)),n.checkFormFilled=n.checkFormFilled.bind(Object(L.a)(n)),n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){if(void 0!==this.context.results){var e=this.context.results;this.setState(e)}else{var a=this.state;this.context.results=a}this.checkFormFilled()}},{key:"componentDidUpdate",value:function(){var e=this.state;this.context.results=e,console.log(this.state)}},{key:"render",value:function(){return Object(S.jsx)("div",{children:this.renderBody()})}}]),t}(n.Component);Ke.contextType=M;var ze=Ke,We=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"App Context"}),Object(S.jsx)("pre",{children:JSON.stringify(this.context,null,2)})]})}}]),t}(n.Component);We.contextType=M;var Je=We,Ze=[];[{name:"Afghanistan",code:"AF"},{name:"\xc5land Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}].forEach((function(e){Ze.push(e.name)}));var Ye=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={userLocationFound:!1,userLocation:{},projectName:"",projectID:"",country:"",countryNames:Ze},n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){if(void 0===this.context.projectInfo){var e=this.state;this.context=e}if(void 0!==this.context.projectInfo){var a=this.context.projectInfo;this.setState(a)}console.log(this.state),console.log(this.state.countryNames)}},{key:"componentDidUpdate",value:function(){console.log(this.state)}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Project info"}),Object(S.jsxs)(E.a,{children:[Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Project Name"}),Object(S.jsx)(H.a,{}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"A memorable name for your project."})]}),Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Project ID"}),Object(S.jsx)(H.a,{})]}),Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Country"}),Object(S.jsx)(H.a,{as:"select",children:this.state.countryNames.map((function(e){return Object(S.jsx)("option",{children:e})}))})]}),Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Major Region"}),Object(S.jsx)(H.a,{}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"e.g. state/province"})]}),Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Minor Region"}),Object(S.jsx)(H.a,{}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"e.g. county"})]}),Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Community Name"}),Object(S.jsx)(H.a,{})]}),Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Community Type"}),Object(S.jsx)(H.a,{}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"e.g. village/sub-village"})]}),Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Meeting Date"}),Object(S.jsx)(H.a,{})]}),Object(S.jsxs)(He.a,{children:[Object(S.jsx)(Ge.a,{children:"Project Description"}),Object(S.jsx)(H.a,{as:"textarea",rows:4})]})]}),Object(S.jsx)("h2",{children:"Geolocation"}),Object(S.jsx)(Ce,{})]})}}]),t}(n.Component);Ye.contextType=M;var Qe=Ye,qe=30,Xe="sidebar-nav-link",_e=[{title:"Home",routeKey:"home-route",component:Object(S.jsx)(k,{}),path:"/home",icon:Object(S.jsx)(f.a,{size:qe}),cName:Xe},{title:"Data Entry",routeKey:"data-entry-route",component:Object(S.jsx)(je,{}),path:"/data-entry",icon:Object(S.jsx)(f.b,{size:qe}),cName:Xe},{title:"Project Information",routeKey:"project-info-route",component:Object(S.jsx)(Qe,{}),path:"/project-info",icon:Object(S.jsx)(x.b,{size:qe}),cName:Xe},{title:"Results",routeKey:"results-route",component:Object(S.jsx)(ze,{}),path:"/results",icon:Object(S.jsx)(x.a,{size:qe}),cName:Xe},{title:"Admin",routeKey:"admin-route",component:Object(S.jsx)(A,{}),path:"/admin",icon:Object(S.jsx)(p.a,{size:qe}),cName:Xe},{title:"Login",routeKey:"login-route",component:Object(S.jsx)(I,{}),path:"/login",icon:Object(S.jsx)(h.a,{size:qe}),cName:Xe},{title:"View App Data",routeKey:"app-data-route",component:Object(S.jsx)(Je,{}),path:"/app-data",icon:Object(S.jsx)(j.a,{size:qe}),cName:Xe}],$e=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).toggleSidebar=function(){n.setState({sideBarOpen:!n.state.sideBarOpen})},n.state={sideBarOpen:!1},n}return Object(c.a)(t,[{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"container_row",children:[Object(S.jsx)("div",{className:"menu-button",children:Object(S.jsx)("a",{onClick:this.toggleSidebar,children:Object(S.jsx)(f.c,{size:50,color:"white"})})}),Object(S.jsxs)("div",{className:this.state.sideBarOpen?"sidebar-container active":"sidebar-container",children:[Object(S.jsxs)("div",{className:"sidebar-header-container",children:[Object(S.jsx)("h2",{children:"LegumeCHOICE"}),Object(S.jsx)("a",{onClick:this.toggleSidebar,children:Object(S.jsx)("div",{className:"close-menu-icon",children:Object(S.jsx)(b.a,{size:40,color:"white"})})})]},"sidebar-header "),Object(S.jsx)("div",{className:"link-container",children:Object(S.jsx)("ul",{children:_e.map((function(a,t){return Object(S.jsx)(m.b,{className:a.cName,to:a.path,onClick:e.toggleSidebar,children:Object(S.jsx)("div",{className:"sidebar-list-item",children:Object(S.jsxs)("li",{className:"sidebar-list-item",children:[Object(S.jsx)("span",{className:"side-bar-link-icon",children:a.icon}),Object(S.jsx)("span",{className:"side-bar-link-text",children:a.title})]},t+"-list-item")})},t+"-link-item")}))})})]})]})}}]),t}(r.a.Component),ea=(t(221),t(222),function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){return Object(l.a)(this,t),a.call(this,e)}return Object(c.a)(t,[{key:"render",value:function(){return Object(S.jsx)(m.a,{children:Object(S.jsxs)("div",{children:[Object(S.jsx)($e,{}),Object(S.jsx)("div",{className:"outer-page-container",children:Object(S.jsx)("div",{className:"inner-page-container",children:Object(S.jsx)(d.d,{children:Object(S.jsxs)(M.Provider,{value:{},children:[_e.map((function(e){return Object(S.jsx)(d.b,{exact:!0,path:e.path,children:e.component},e.routeKey)})),Object(S.jsx)(d.a,{exact:!0,from:"/",to:"/home"})]})})})})]})})}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var aa=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,230)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,o=a.getLCP,i=a.getTTFB;t(e),n(e),r(e),o(e),i(e)}))};i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ea,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),aa()}},[[223,1,2]]]);
//# sourceMappingURL=main.4125f745.chunk.js.map